{"version":3,"sources":["../../../../src/app/page.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useEffect, useMemo, useRef, useState } from \"react\";\n\n/** ===========================================\n *  SprachenlernApp ‚Äì Auto-Language Mode\n *  Tabs: Heute | √úbungen | Profil | Settings\n *  - User w√§hlt nur Lernsprache (Target)\n *  - Content wird automatisch aus Starter-Packs gef√ºllt (offline)\n *  - SRS + √úbungen (nur klicken)\n *  - Fortschritt/Analytics pro Sprache\n *  - TTS + Success/Fail Sound + Vibrate\n * =========================================== */\n\ntype View = \"today\" | \"practice\" | \"profile\" | \"settings\";\ntype ThemeMode = \"light\" | \"dark\";\ntype AppTheme = \"ocean\" | \"sunset\" | \"lime\" | \"grape\";\n\ntype Lang = \"EN\" | \"ES\" | \"FR\" | \"RU\";\ntype Level = \"BEGINNER\" | \"INTERMEDIATE\" | \"ADVANCED\";\ntype CardKind = \"vocab\" | \"sentence\";\n\ntype Card = {\n  id: string;\n  targetLang: Lang;\n  kind: CardKind;\n  front: string; // source/native (DE)\n  back: string;  // target\n  example?: string;\n  exampleTranslation?: string;\n\n  due: number;\n  intervalDays: number;\n  ease: number;\n  lapses: number;\n  lastReviewed?: number;\n};\n\ntype DailyStat = { reviewed: number; correct: number; wrong: number; minutes: number };\n\ntype Profile = {\n  username: string;\n  nativeLang: \"DE\";\n  targetLang: Lang;\n  level: Level;\n  dailyGoal: number;\n  xp: number;\n  streak: number;\n  bestStreak: number;\n  lastActiveDay: string; // YYYY-MM-DD\n  createdAt: number;\n};\n\ntype Achievement = {\n  id: string;\n  title: string;\n  desc: string;\n  icon: string;\n  unlockedAt?: number;\n};\n\ntype AppData = {\n  cards: Card[];\n  profile: Profile;\n  achievements: Achievement[];\n  dailyStatsByLang: Record<Lang, Record<string, DailyStat>>;\n};\n\nconst STORAGE_KEY = \"sprachapp_auto_v1\";\nconst THEME_KEY = \"sprachapp_theme_mode_v1\";\nconst PALETTE_KEY = \"sprachapp_palette_v1\";\n\nconst THEME_CLASS: Record<AppTheme, string> = {\n  ocean: \"theme-ocean\",\n  sunset: \"theme-sunset\",\n  lime: \"theme-lime\",\n  grape: \"theme-grape\",\n};\n\nconst TTS_LANG: Record<Lang | \"DE\", string> = {\n  DE: \"de-DE\",\n  EN: \"en-US\",\n  ES: \"es-ES\",\n  FR: \"fr-FR\",\n  RU: \"ru-RU\",\n};\n\n/** ---------- Starter Packs (offline) ----------\n *  Kleines Starter-Pack ‚Äì wir k√∂nnen sp√§ter massiv erweitern / Download-Packs bauen.\n */\nconst PACKS: Record<Lang, { vocab: Array<{ de: string; x: string; ex?: string; exTr?: string }>; sentences: Array<{ de: string; x: string }> }> =\n  {\n    EN: {\n      vocab: [\n        { de: \"laufen\", x: \"to run\", ex: \"Ich laufe jeden Morgen.\", exTr: \"I run every morning.\" },\n        { de: \"essen\", x: \"to eat\", ex: \"Ich esse gern Pasta.\", exTr: \"I like eating pasta.\" },\n        { de: \"trinken\", x: \"to drink\", ex: \"Trinkst du Wasser?\", exTr: \"Are you drinking water?\" },\n        { de: \"Zeit\", x: \"time\", ex: \"Ich habe keine Zeit.\", exTr: \"I have no time.\" },\n        { de: \"Freund\", x: \"friend\", ex: \"Er ist mein Freund.\", exTr: \"He is my friend.\" },\n        { de: \"lernen\", x: \"to learn\", ex: \"Ich lerne Englisch.\", exTr: \"I am learning English.\" },\n        { de: \"Arbeit\", x: \"work\", ex: \"Ich gehe zur Arbeit.\", exTr: \"I go to work.\" },\n        { de: \"Haus\", x: \"house\", ex: \"Das Haus ist gro√ü.\", exTr: \"The house is big.\" },\n        { de: \"Buch\", x: \"book\", ex: \"Das Buch ist interessant.\", exTr: \"The book is interesting.\" },\n        { de: \"heute\", x: \"today\", ex: \"Heute ist Montag.\", exTr: \"Today is Monday.\" },\n      ],\n      sentences: [\n        { de: \"Ich gehe heute nicht zur Arbeit.\", x: \"I am not going to work today.\" },\n        { de: \"Kannst du mir bitte helfen?\", x: \"Can you please help me?\" },\n        { de: \"Wie sp√§t ist es?\", x: \"What time is it?\" },\n        { de: \"Ich verstehe das nicht.\", x: \"I don't understand that.\" },\n        { de: \"Ich m√∂chte einen Kaffee.\", x: \"I would like a coffee.\" },\n      ],\n    },\n    ES: {\n      vocab: [\n        { de: \"Hallo\", x: \"hola\" },\n        { de: \"bitte\", x: \"por favor\" },\n        { de: \"danke\", x: \"gracias\" },\n        { de: \"Wasser\", x: \"agua\" },\n        { de: \"essen\", x: \"comer\" },\n        { de: \"trinken\", x: \"beber\" },\n        { de: \"Haus\", x: \"casa\" },\n        { de: \"Freund\", x: \"amigo\" },\n        { de: \"Zeit\", x: \"tiempo\" },\n        { de: \"heute\", x: \"hoy\" },\n      ],\n      sentences: [\n        { de: \"Ich m√∂chte einen Kaffee, bitte.\", x: \"Quisiera un caf√©, por favor.\" },\n        { de: \"Ich verstehe das nicht.\", x: \"No entiendo eso.\" },\n        { de: \"Wo ist die Toilette?\", x: \"¬øD√≥nde est√° el ba√±o?\" },\n        { de: \"Kannst du mir helfen?\", x: \"¬øPuedes ayudarme?\" },\n        { de: \"Wie sp√§t ist es?\", x: \"¬øQu√© hora es?\" },\n      ],\n    },\n    FR: {\n      vocab: [\n        { de: \"Hallo\", x: \"bonjour\" },\n        { de: \"bitte\", x: \"s'il vous pla√Æt\" },\n        { de: \"danke\", x: \"merci\" },\n        { de: \"Wasser\", x: \"eau\" },\n        { de: \"essen\", x: \"manger\" },\n        { de: \"trinken\", x: \"boire\" },\n        { de: \"Haus\", x: \"maison\" },\n        { de: \"Freund\", x: \"ami\" },\n        { de: \"Zeit\", x: \"temps\" },\n        { de: \"heute\", x: \"aujourd'hui\" },\n      ],\n      sentences: [\n        { de: \"Ich m√∂chte einen Kaffee, bitte.\", x: \"Je voudrais un caf√©, s'il vous pla√Æt.\" },\n        { de: \"Ich verstehe das nicht.\", x: \"Je ne comprends pas.\" },\n        { de: \"Wo ist die Toilette?\", x: \"O√π sont les toilettes ?\" },\n        { de: \"Kannst du mir helfen?\", x: \"Peux-tu m'aider ?\" },\n        { de: \"Wie sp√§t ist es?\", x: \"Quelle heure est-il ?\" },\n      ],\n    },\n    RU: {\n      vocab: [\n        { de: \"Hallo\", x: \"–ø—Ä–∏–≤–µ—Ç\" },\n        { de: \"bitte\", x: \"–ø–æ–∂–∞–ª—É–π—Å—Ç–∞\" },\n        { de: \"danke\", x: \"—Å–ø–∞—Å–∏–±–æ\" },\n        { de: \"Wasser\", x: \"–≤–æ–¥–∞\" },\n        { de: \"essen\", x: \"–µ—Å—Ç—å\" },\n        { de: \"trinken\", x: \"–ø–∏—Ç—å\" },\n        { de: \"Haus\", x: \"–¥–æ–º\" },\n        { de: \"Freund\", x: \"–¥—Ä—É–≥\" },\n        { de: \"Zeit\", x: \"–≤—Ä–µ–º—è\" },\n        { de: \"heute\", x: \"—Å–µ–≥–æ–¥–Ω—è\" },\n      ],\n      sentences: [\n        { de: \"Ich verstehe das nicht.\", x: \"–Ø –Ω–µ –ø–æ–Ω–∏–º–∞—é.\" },\n        { de: \"Kannst du mir helfen?\", x: \"–¢—ã –º–æ–∂–µ—à—å –º–Ω–µ –ø–æ–º–æ—á—å?\" },\n        { de: \"Wie sp√§t ist es?\", x: \"–ö–æ—Ç–æ—Ä—ã–π —á–∞—Å?\" },\n        { de: \"Ich m√∂chte einen Kaffee, bitte.\", x: \"–Ø —Ö–æ—Ç–µ–ª(–∞) –±—ã –∫–æ—Ñ–µ, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞.\" },\n        { de: \"Wo ist die Toilette?\", x: \"–ì–¥–µ —Ç—É–∞–ª–µ—Ç?\" },\n      ],\n    },\n  };\n\n/** ---------- Helpers ---------- */\nfunction uid() {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const c: any = globalThis.crypto;\n  if (c?.randomUUID) return c.randomUUID();\n  return Math.random().toString(36).slice(2) + Date.now().toString(36);\n}\nfunction pad2(n: number) {\n  return String(n).padStart(2, \"0\");\n}\nfunction todayKey(d = new Date()) {\n  return `${d.getFullYear()}-${pad2(d.getMonth() + 1)}-${pad2(d.getDate())}`;\n}\nfunction clamp(n: number, a: number, b: number) {\n  return Math.max(a, Math.min(b, n));\n}\nfunction pickRandom<T>(arr: T[]) {\n  return arr[Math.floor(Math.random() * arr.length)];\n}\nfunction escapeRegExp(s: string) {\n  return s.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\");\n}\nfunction diffDays(a: string, b: string) {\n  const [ay, am, ad] = a.split(\"-\").map(Number);\n  const [by, bm, bd] = b.split(\"-\").map(Number);\n  const da = new Date(ay, am - 1, ad).getTime();\n  const db = new Date(by, bm - 1, bd).getTime();\n  return Math.round((db - da) / (24 * 60 * 60 * 1000));\n}\n\n/** ---------- SRS (light) ---------- */\nfunction schedule(card: Card, correct: boolean): Card {\n  const now = Date.now();\n  let ease = card.ease;\n  let intervalDays = card.intervalDays;\n\n  if (correct) {\n    ease = clamp(ease + 0.05, 1.3, 2.8);\n    if (intervalDays <= 0) intervalDays = 1;\n    else if (intervalDays === 1) intervalDays = 3;\n    else intervalDays = Math.round(intervalDays * ease);\n  } else {\n    ease = clamp(ease - 0.15, 1.3, 2.8);\n    intervalDays = 0;\n  }\n\n  const due = now + (correct ? intervalDays : 0.25) * 24 * 60 * 60 * 1000; // wrong => retry in ~6h\n  return {\n    ...card,\n    ease,\n    intervalDays,\n    due,\n    lapses: correct ? card.lapses : card.lapses + 1,\n    lastReviewed: now,\n  };\n}\n\n/** ---------- Practice helpers (word-choice cloze) ---------- */\nfunction makeCloze(sentence: string) {\n  const cleanedWords = sentence\n    .split(/\\s+/)\n    .map((w) => w.replace(/[.,!?;:()\"‚Äû‚Äú‚Äù‚Äú'‚Äô]/g, \"\"))\n    .filter(Boolean);\n\n  const candidates = cleanedWords.filter((w) => w.length >= 4);\n  const answer = candidates.length ? pickRandom(candidates) : cleanedWords[cleanedWords.length - 1] ?? \"\";\n  const re = new RegExp(`\\\\b${escapeRegExp(answer)}\\\\b`);\n  const cloze = sentence.replace(re, \"____\");\n  return { cloze, answer };\n}\nfunction makeChoices(correct: string, pool: string[], n = 4) {\n  const wrongs = pool.filter((x) => x !== correct);\n  const picks = new Set<string>([correct]);\n  while (picks.size < n && wrongs.length) picks.add(pickRandom(wrongs));\n  return Array.from(picks).sort(() => Math.random() - 0.5);\n}\n\n/** ---------- Audio feedback ---------- */\nfunction playTone(type: \"good\" | \"bad\") {\n  if (typeof window === \"undefined\") return;\n  const AudioCtx = window.AudioContext || (window as any).webkitAudioContext;\n  if (!AudioCtx) return;\n\n  const ctx = new AudioCtx();\n  const o = ctx.createOscillator();\n  const g = ctx.createGain();\n  o.type = \"sine\";\n\n  const now = ctx.currentTime;\n  if (type === \"good\") {\n    o.frequency.setValueAtTime(784, now);\n    o.frequency.exponentialRampToValueAtTime(1046.5, now + 0.12);\n    g.gain.setValueAtTime(0.0001, now);\n    g.gain.exponentialRampToValueAtTime(0.15, now + 0.01);\n    g.gain.exponentialRampToValueAtTime(0.0001, now + 0.18);\n    o.connect(g);\n    g.connect(ctx.destination);\n    o.start(now);\n    o.stop(now + 0.2);\n  } else {\n    o.frequency.setValueAtTime(220, now);\n    o.frequency.exponentialRampToValueAtTime(155, now + 0.18);\n    g.gain.setValueAtTime(0.0001, now);\n    g.gain.exponentialRampToValueAtTime(0.18, now + 0.01);\n    g.gain.exponentialRampToValueAtTime(0.0001, now + 0.22);\n    o.connect(g);\n    g.connect(ctx.destination);\n    o.start(now);\n    o.stop(now + 0.24);\n  }\n\n  setTimeout(() => ctx.close().catch(() => {}), 400);\n}\nfunction vibrate(ms: number) {\n  if (typeof window === \"undefined\") return;\n  navigator.vibrate?.(ms);\n}\n\n/** ---------- Robust TTS voice picking ---------- */\nfunction speak(text: string, lang?: string) {\n  if (typeof window === \"undefined\" || !(\"speechSynthesis\" in window)) return;\n  const synth = window.speechSynthesis;\n  const utter = new SpeechSynthesisUtterance(text);\n  const targetLang = lang || \"en-US\";\n\n  function pickVoiceAndSpeak() {\n    const voices = synth.getVoices();\n    if (!voices.length) return;\n\n    const primary = targetLang.split(\"-\")[0].toLowerCase();\n    const voice =\n      voices.find((v) => v.lang?.toLowerCase() === targetLang.toLowerCase()) ||\n      voices.find((v) => v.lang?.toLowerCase().startsWith(primary)) ||\n      voices[0];\n\n    if (voice) utter.voice = voice;\n    utter.lang = voice?.lang || targetLang;\n\n    synth.cancel();\n    synth.speak(utter);\n  }\n\n  if (synth.getVoices().length === 0) {\n    synth.onvoiceschanged = pickVoiceAndSpeak;\n  } else {\n    pickVoiceAndSpeak();\n  }\n}\nfunction stopSpeak() {\n  if (typeof window === \"undefined\") return;\n  window.speechSynthesis?.cancel();\n}\n\n/** ---------- Gamification ---------- */\nfunction xpForLevel(level: number) {\n  return Math.round(100 * Math.pow(level, 1.2));\n}\nfunction computeLevelFromXp(totalXp: number) {\n  let lvl = 1;\n  let xp = totalXp;\n  while (xp >= xpForLevel(lvl) && lvl < 200) {\n    xp -= xpForLevel(lvl);\n    lvl += 1;\n  }\n  const need = xpForLevel(lvl);\n  const progress = need === 0 ? 0 : clamp(xp / need, 0, 1);\n  return { level: lvl, xpIntoLevel: xp, xpNeed: need, progress };\n}\nfunction addXp(profile: Profile, amount: number) {\n  const newXp = Math.max(0, profile.xp + amount);\n  const { level } = computeLevelFromXp(newXp);\n  return { ...profile, xp: newXp, /* derived */ lastActiveDay: profile.lastActiveDay, streak: profile.streak, bestStreak: profile.bestStreak, level };\n}\nfunction defaultAchievements(): Achievement[] {\n  return [\n    { id: \"first10\", title: \"Erste Schritte\", desc: \"Lerne 10 Karten\", icon: \"‚ú®\" },\n    { id: \"streak3\", title: \"Konsequent\", desc: \"3 Tage Streak\", icon: \"üî•\" },\n    { id: \"streak7\", title: \"Eine Woche\", desc: \"7 Tage Streak\", icon: \"üèÖ\" },\n    { id: \"review100\", title: \"Hundert\", desc: \"Lerne 100 Karten\", icon: \"üíØ\" },\n    { id: \"perfect20day\", title: \"Sauber!\", desc: \"20 richtige an einem Tag\", icon: \"üéØ\" },\n    { id: \"nightowl\", title: \"Night Owl\", desc: \"Lerne nach 23:00\", icon: \"üåô\" },\n  ];\n}\n\n/** ---------- Data load/save ---------- */\nfunction loadData(): AppData {\n  const raw = typeof window !== \"undefined\" ? localStorage.getItem(STORAGE_KEY) : null;\n  if (raw) return JSON.parse(raw) as AppData;\n\n  const now = Date.now();\n  const prof: Profile = {\n    username: \"Learner\",\n    nativeLang: \"DE\",\n    targetLang: \"EN\",\n    level: \"BEGINNER\",\n    dailyGoal: 20,\n    xp: 0,\n    streak: 0,\n    bestStreak: 0,\n    lastActiveDay: todayKey(),\n    createdAt: now,\n  };\n\n  const seed = seedCardsFromPack(\"EN\", \"BEGINNER\", 30);\n\n  return {\n    cards: seed,\n    profile: prof,\n    achievements: defaultAchievements(),\n    dailyStatsByLang: { EN: {}, ES: {}, FR: {}, RU: {} },\n  };\n}\nfunction saveData(data: AppData) {\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(data));\n}\n\n/** ---------- Seeding logic (auto content) ---------- */\nfunction seedCardsFromPack(targetLang: Lang, level: Level, maxCards: number) {\n  const pack = PACKS[targetLang];\n  const now = Date.now();\n\n  // simple level scaling: beginner uses more vocab than sentences; advanced more sentences\n  const vocabRatio = level === \"BEGINNER\" ? 0.7 : level === \"INTERMEDIATE\" ? 0.55 : 0.45;\n  const vocabCount = Math.max(5, Math.round(maxCards * vocabRatio));\n  const sentCount = Math.max(3, maxCards - vocabCount);\n\n  const vocabs = pack.vocab.slice(0, vocabCount).map((v) => ({\n    id: uid(),\n    targetLang,\n    kind: \"vocab\" as const,\n    front: v.de,\n    back: v.x,\n    example: v.ex,\n    exampleTranslation: v.exTr,\n    due: now,\n    intervalDays: 0,\n    ease: 2.0,\n    lapses: 0,\n  }));\n\n  const sents = pack.sentences.slice(0, sentCount).map((s) => ({\n    id: uid(),\n    targetLang,\n    kind: \"sentence\" as const,\n    front: s.de,\n    back: s.x,\n    due: now,\n    intervalDays: 0,\n    ease: 2.0,\n    lapses: 0,\n  }));\n\n  return [...vocabs, ...sents].slice(0, maxCards);\n}\n\n/** ===========================================\n * Page\n * =========================================== */\nexport default function Page() {\n  const [data, setData] = useState<AppData>(() => loadData());\n  const [view, setView] = useState<View>(\"today\");\n\n  const [mode, setMode] = useState<ThemeMode>(\"light\");\n  const [palette, setPalette] = useState<AppTheme>(\"ocean\");\n\n  const sessionStartRef = useRef<number>(Date.now());\n\n  useEffect(() => saveData(data), [data]);\n\n  /** theme init */\n  useEffect(() => {\n    const saved = (localStorage.getItem(THEME_KEY) as ThemeMode | null) ?? \"light\";\n    setMode(saved);\n    document.documentElement.classList.toggle(\"dark\", saved === \"dark\");\n  }, []);\n  useEffect(() => {\n    localStorage.setItem(THEME_KEY, mode);\n    document.documentElement.classList.toggle(\"dark\", mode === \"dark\");\n  }, [mode]);\n\n  /** palette init */\n  useEffect(() => {\n    const saved = (localStorage.getItem(PALETTE_KEY) as AppTheme | null) ?? \"ocean\";\n    setPalette(saved);\n  }, []);\n  useEffect(() => {\n    localStorage.setItem(PALETTE_KEY, palette);\n    Object.values(THEME_CLASS).forEach((cls) => document.documentElement.classList.remove(cls));\n    document.documentElement.classList.add(THEME_CLASS[palette]);\n  }, [palette]);\n\n  /** streak day rollover */\n  useEffect(() => {\n    const today = todayKey();\n    setData((prev) => {\n      const p = prev.profile;\n      const delta = diffDays(p.lastActiveDay, today);\n      if (delta <= 0) return prev;\n      // if missed days => reset streak (we keep it simple)\n      if (delta >= 2) return { ...prev, profile: { ...p, streak: 0, lastActiveDay: today } };\n      return { ...prev, profile: { ...p, lastActiveDay: today } };\n    });\n  }, []);\n\n  const target = data.profile.targetLang;\n\n  /** ensure we always have some cards for selected language */\n  useEffect(() => {\n    const has = data.cards.some((c) => c.targetLang === target);\n    if (has) return;\n\n    setData((prev) => ({\n      ...prev,\n      cards: [...seedCardsFromPack(prev.profile.targetLang, prev.profile.level, 30), ...prev.cards],\n    }));\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [target]);\n\n  const allCardsForLang = useMemo(() => data.cards.filter((c) => c.targetLang === target), [data.cards, target]);\n\n  const dueCards = useMemo(() => {\n    const now = Date.now();\n    return allCardsForLang.filter((c) => c.due <= now).sort((a, b) => a.due - b.due);\n  }, [allCardsForLang]);\n\n  const nextCard = dueCards[0];\n\n  const todayStat = useMemo(() => {\n    const k = todayKey();\n    return data.dailyStatsByLang[target]?.[k] ?? { reviewed: 0, correct: 0, wrong: 0, minutes: 0 };\n  }, [data.dailyStatsByLang, target]);\n\n  function addMinutesSinceLastTick() {\n    const now = Date.now();\n    const elapsed = now - sessionStartRef.current;\n    if (elapsed < 30_000) return 0;\n    const minutes = Math.floor(elapsed / 60_000);\n    if (minutes <= 0) return 0;\n    sessionStartRef.current = now;\n    return minutes;\n  }\n\n  function bumpStats(correct: boolean) {\n    const k = todayKey();\n    const addMin = addMinutesSinceLastTick();\n\n    setData((prev) => {\n      const byLang = { ...prev.dailyStatsByLang };\n      const langMap = { ...(byLang[target] ?? {}) };\n      const cur = langMap[k] ?? { reviewed: 0, correct: 0, wrong: 0, minutes: 0 };\n      langMap[k] = {\n        reviewed: cur.reviewed + 1,\n        correct: cur.correct + (correct ? 1 : 0),\n        wrong: cur.wrong + (correct ? 0 : 1),\n        minutes: cur.minutes + addMin,\n      };\n      byLang[target] = langMap;\n      return { ...prev, dailyStatsByLang: byLang };\n    });\n  }\n\n  function updateStreakIfGoalMet(nextReviewed: number) {\n    const today = todayKey();\n    setData((prev) => {\n      const p = prev.profile;\n      if (nextReviewed < p.dailyGoal) return prev;\n\n      // if already \"counted today\", no extra action\n      if (p.lastActiveDay === today && p.streak > 0) {\n        return { ...prev, profile: { ...p, bestStreak: Math.max(p.bestStreak, p.streak), lastActiveDay: today } };\n      }\n\n      const delta = diffDays(p.lastActiveDay, today);\n      let streak = p.streak;\n      if (delta === 0) streak = p.streak;\n      else if (delta === 1) streak = p.streak + 1;\n      else streak = 1;\n\n      return { ...prev, profile: { ...p, streak, bestStreak: Math.max(p.bestStreak, streak), lastActiveDay: today } };\n    });\n  }\n\n  function unlockAchievement(id: string) {\n    setData((prev) => {\n      const idx = prev.achievements.findIndex((a) => a.id === id);\n      if (idx < 0) return prev;\n      if (prev.achievements[idx].unlockedAt) return prev;\n      const updated = [...prev.achievements];\n      updated[idx] = { ...updated[idx], unlockedAt: Date.now() };\n      return { ...prev, achievements: updated };\n    });\n  }\n\n  function evaluateAchievements() {\n    const k = todayKey();\n    const t = data.dailyStatsByLang[target]?.[k] ?? { reviewed: 0, correct: 0, wrong: 0, minutes: 0 };\n\n    const totalReviewedAllLang = (Object.values(data.dailyStatsByLang) as any[]).flatMap((m) => Object.values(m)).reduce((s: number, d: any) => s + (d.reviewed || 0), 0);\n\n    if (totalReviewedAllLang >= 10) unlockAchievement(\"first10\");\n    if (totalReviewedAllLang >= 100) unlockAchievement(\"review100\");\n    if (data.profile.streak >= 3) unlockAchievement(\"streak3\");\n    if (data.profile.streak >= 7) unlockAchievement(\"streak7\");\n    if (t.correct >= 20) unlockAchievement(\"perfect20day\");\n    if (new Date().getHours() >= 23) unlockAchievement(\"nightowl\");\n  }\n\n  useEffect(() => {\n    evaluateAchievements();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [data.dailyStatsByLang, data.profile.streak, data.profile.targetLang]);\n\n  /** learned definitions */\n  const learnedThreshold = 3; // days\n  const masteredThreshold = 7;\n\n  const learned = useMemo(() => {\n    const vocabLearned = allCardsForLang.filter((c) => c.kind === \"vocab\" && c.intervalDays >= learnedThreshold).length;\n    const vocabMastered = allCardsForLang.filter((c) => c.kind === \"vocab\" && c.intervalDays >= masteredThreshold).length;\n    const sentLearned = allCardsForLang.filter((c) => c.kind === \"sentence\" && c.intervalDays >= learnedThreshold).length;\n    const total = allCardsForLang.length || 1;\n    const learnedTotal = vocabLearned + sentLearned;\n    return { vocabLearned, vocabMastered, sentLearned, learnedTotal, total, progress: clamp(learnedTotal / total, 0, 1) };\n  }, [allCardsForLang]);\n\n  const goalProgress = clamp(todayStat.reviewed / Math.max(1, data.profile.dailyGoal), 0, 1);\n  const goalMet = todayStat.reviewed >= data.profile.dailyGoal;\n\n  const levelInfo = useMemo(() => computeLevelFromXp(data.profile.xp), [data.profile.xp]);\n\n  const last14 = useMemo(() => {\n    const days: { day: string; s: DailyStat }[] = [];\n    const base = new Date();\n    for (let i = 13; i >= 0; i--) {\n      const d = new Date(base);\n      d.setDate(d.getDate() - i);\n      const key = todayKey(d);\n      const s = data.dailyStatsByLang[target]?.[key] ?? { reviewed: 0, correct: 0, wrong: 0, minutes: 0 };\n      days.push({ day: key, s });\n    }\n    return days;\n  }, [data.dailyStatsByLang, target]);\n\n  const totalsLang = useMemo(() => {\n    const all = Object.values(data.dailyStatsByLang[target] ?? {});\n    const reviewed = all.reduce((a, x) => a + (x.reviewed || 0), 0);\n    const correct = all.reduce((a, x) => a + (x.correct || 0), 0);\n    const wrong = all.reduce((a, x) => a + (x.wrong || 0), 0);\n    const minutes = all.reduce((a, x) => a + (x.minutes || 0), 0);\n    const acc = reviewed ? Math.round((correct / reviewed) * 100) : 0;\n    return { reviewed, correct, wrong, minutes, acc };\n  }, [data.dailyStatsByLang, target]);\n\n  /** main review */\nfunction review(correct: boolean) {\n  if (!nextCard) return;\n\n  playTone(correct ? \"good\" : \"bad\");\n  vibrate(correct ? 20 : 60);\n\n  // Stats in der Datenbank/API (falls synchron)\n  bumpStats(correct);\n\n  setData((prev) => {\n    // 1. XP f√ºr die aktuelle Antwort berechnen\n    let updatedProfile = addXp(prev.profile, correct ? 10 : 3) as unknown as Profile;\n    \n    // 2. Karten-Status (Scheduling) aktualisieren\n    const updatedCards = prev.cards.map((c) =>\n      c.id === nextCard.id ? schedule(c, correct) : c\n    );\n\n    // 3. Session-Bonus pr√ºfen (alle 20 Karten)\n    const nextReviewed = (todayStat.reviewed || 0) + 1;\n    if (nextReviewed > 0 && nextReviewed % 20 === 0) {\n      updatedProfile = addXp(updatedProfile, 20) as unknown as Profile;\n    }\n\n    // Alles in einem Rutsch zur√ºckgeben\n    return {\n      ...prev,\n      profile: updatedProfile,\n      cards: updatedCards,\n    } as AppData;\n  });\n\n  // Streak-Logik au√üerhalb des Setters (da sie meist Seiteneffekte hat)\n  updateStreakIfGoalMet(todayStat.reviewed + 1);\n}\n\n  function addMoreStarterCards(n: number) {\n    setData((prev) => {\n      const existingKeys = new Set(prev.cards.filter((c) => c.targetLang === prev.profile.targetLang).map((c) => `${c.kind}::${c.front}::${c.back}`));\n      const fresh = seedCardsFromPack(prev.profile.targetLang, prev.profile.level, n * 2).filter((c) => !existingKeys.has(`${c.kind}::${c.front}::${c.back}`));\n      return { ...prev, cards: [...fresh.slice(0, n), ...prev.cards] };\n    });\n  }\n\n  /** UI */\n  return (\n    <div className=\"min-h-screen bg-gradient-to-b from-[var(--bg1)] via-[var(--bg2)] to-[var(--bg3)] text-slate-900 dark:text-slate-50\">\n      <div className=\"mx-auto max-w-5xl px-4 pb-24 pt-6\">\n        <Header\n          view={view}\n          setView={setView}\n          mode={mode}\n          toggleMode={() => setMode((t) => (t === \"dark\" ? \"light\" : \"dark\"))}\n          level={data.profile.level}\n          xp={data.profile.xp}\n          targetLang={target}\n          streak={data.profile.streak}\n        />\n\n        {view === \"today\" && (\n          <div className=\"mt-6 grid gap-4\">\n            <CardShell>\n              <div className=\"flex flex-wrap items-center justify-between gap-3\">\n                <div>\n                  <div className=\"text-sm text-slate-500 dark:text-slate-400\">Lernsprache</div>\n                  <div className=\"text-lg font-semibold\">Deutsch ‚Üí {target}</div>\n                  <div className=\"mt-1 text-sm text-slate-600 dark:text-slate-400\">\n                    <b className=\"text-slate-900 dark:text-slate-100\">{dueCards.length}</b> f√§llig ¬∑{\" \"}\n                    <b className=\"text-slate-900 dark:text-slate-100\">{todayStat.reviewed}</b> heute ¬∑{\" \"}\n                    <b className=\"text-slate-900 dark:text-slate-100\">{data.profile.streak}</b>üî• Streak\n                  </div>\n                </div>\n                <Pill>{goalMet ? \"‚úÖ Ziel\" : `${data.profile.dailyGoal} / Tag`}</Pill>\n              </div>\n\n              <div className=\"mt-4\">\n                <div className=\"flex items-center justify-between text-xs text-slate-600 dark:text-slate-400\">\n                  <span>Tagesziel</span>\n                  <span>\n                    {todayStat.reviewed}/{data.profile.dailyGoal}\n                  </span>\n                </div>\n                <div className=\"mt-2 h-3 w-full rounded-full bg-white/60 dark:bg-slate-900/50\">\n                  <div className=\"h-3 rounded-full bg-gradient-to-r from-emerald-500 to-teal-500\" style={{ width: `${Math.round(goalProgress * 100)}%` }} />\n                </div>\n\n                <div className=\"mt-4\">\n                  <div className=\"flex items-center justify-between text-xs text-slate-600 dark:text-slate-400\">\n                    <span>Sprach-Fortschritt (gelernt)</span>\n                    <span>\n                      {learned.learnedTotal}/{learned.total}\n                    </span>\n                  </div>\n                  <div className=\"mt-2 h-3 w-full rounded-full bg-white/60 dark:bg-slate-900/50\">\n                    <div className=\"h-3 rounded-full bg-gradient-to-r from-sky-500 to-indigo-500\" style={{ width: `${Math.round(learned.progress * 100)}%` }} />\n                  </div>\n                  <div className=\"mt-2 text-sm text-slate-700 dark:text-slate-200\">\n                    Gelernte W√∂rter: <b>{learned.vocabLearned}</b> (Mastered: <b>{learned.vocabMastered}</b>) ¬∑ Gelernte S√§tze: <b>{learned.sentLearned}</b>\n                  </div>\n                </div>\n              </div>\n            </CardShell>\n\n            <CardShell>\n              {!nextCard ? (\n                <div className=\"rounded-2xl border border-slate-200 bg-white/70 p-6 text-center shadow-sm dark:border-slate-800 dark:bg-slate-950/60\">\n                  <div className=\"text-xl font-semibold\">Keine f√§lligen Karten üéâ</div>\n                  <div className=\"mt-2 text-sm text-slate-600 dark:text-slate-400\">Du kannst neue Karten nachlegen (offline Starter-Pack).</div>\n                  <div className=\"mt-4 flex justify-center gap-2\">\n                    <button\n                      onClick={() => addMoreStarterCards(15)}\n                      className=\"rounded-2xl bg-gradient-to-r from-sky-500 to-indigo-500 px-4 py-2 font-semibold text-white shadow hover:opacity-90\"\n                    >\n                      Ôºã 15 Karten hinzuf√ºgen\n                    </button>\n                    <button\n                      onClick={() => setView(\"practice\")}\n                      className=\"rounded-2xl border border-slate-200 bg-white px-4 py-2 font-semibold shadow-sm hover:shadow dark:border-slate-800 dark:bg-slate-950\"\n                    >\n                      √úbungen ‚Üí\n                    </button>\n                  </div>\n                </div>\n              ) : (\n                <>\n                  <div className=\"flex items-start justify-between gap-3\">\n                    <div className=\"text-sm text-slate-500 dark:text-slate-400\">\n                      Karte ¬∑ <b className=\"text-slate-900 dark:text-slate-100\">{nextCard.kind === \"vocab\" ? \"Vokabel\" : \"Satz\"}</b>\n                    </div>\n\n                    <div className=\"flex gap-2\">\n                      <button\n                        className=\"rounded-xl bg-gradient-to-r from-indigo-500 to-fuchsia-500 px-3 py-1 text-sm font-semibold text-white shadow hover:opacity-90\"\n                        onClick={() => speak(nextCard.front, TTS_LANG.DE)}\n                        title=\"DE vorlesen\"\n                      >\n                        üîä DE\n                      </button>\n                      <button\n                        className=\"rounded-xl bg-gradient-to-r from-sky-500 to-indigo-500 px-3 py-1 text-sm font-semibold text-white shadow hover:opacity-90\"\n                        onClick={() => speak(nextCard.back, TTS_LANG[target])}\n                        title={`${target} vorlesen`}\n                      >\n                        üîä {target}\n                      </button>\n                      <button\n                        className=\"rounded-xl border border-slate-200 bg-white px-3 py-1 text-sm font-semibold shadow-sm hover:shadow dark:border-slate-800 dark:bg-slate-950\"\n                        onClick={stopSpeak}\n                        title=\"Stop\"\n                      >\n                        ‚èπ\n                      </button>\n                    </div>\n                  </div>\n\n                  <div className=\"mt-4 grid gap-3 md:grid-cols-2\">\n                    <div className=\"rounded-2xl border border-slate-200 bg-[var(--cardSolid)] p-5 shadow-sm dark:border-slate-800\">\n                      <div className=\"text-xs font-semibold text-slate-500 dark:text-slate-400\">Deutsch</div>\n                      <div className=\"mt-2 text-2xl font-black\">{nextCard.front}</div>\n                      {nextCard.example && (\n                        <div className=\"mt-3 rounded-2xl border border-slate-200 bg-white/60 p-4 text-sm dark:border-slate-800 dark:bg-slate-950/60\">\n                          <div className=\"font-semibold\">{nextCard.example}</div>\n                          {nextCard.exampleTranslation && <div className=\"mt-1 text-slate-600 dark:text-slate-300\">{nextCard.exampleTranslation}</div>}\n                        </div>\n                      )}\n                    </div>\n\n                    <div className=\"rounded-2xl border border-slate-200 bg-[var(--cardSolid)] p-5 shadow-sm dark:border-slate-800\">\n                      <div className=\"text-xs font-semibold text-slate-500 dark:text-slate-400\">{target}</div>\n                      <div className=\"mt-2 text-2xl font-black bg-gradient-to-r from-sky-600 to-fuchsia-600 bg-clip-text text-transparent dark:from-sky-300 dark:to-fuchsia-300\">\n                        {nextCard.back}\n                      </div>\n                      <div className=\"mt-3 text-sm text-slate-600 dark:text-slate-400\">\n                        Intervall: <b className=\"text-slate-900 dark:text-slate-100\">{nextCard.intervalDays}d</b> ¬∑ Ease:{\" \"}\n                        <b className=\"text-slate-900 dark:text-slate-100\">{nextCard.ease.toFixed(2)}</b>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"mt-4 grid grid-cols-2 gap-3\">\n                    <FancyBtn variant=\"bad\" onClick={() => review(false)} label=\"‚úñ Nicht gewusst\" />\n                    <FancyBtn variant=\"good\" onClick={() => review(true)} label=\"‚úî Gewusst\" />\n                  </div>\n                </>\n              )}\n            </CardShell>\n\n            <CardShell>\n              <div className=\"flex flex-wrap items-center justify-between gap-3\">\n                <div>\n                  <div className=\"text-sm text-slate-500 dark:text-slate-400\">Heute ({target})</div>\n                  <div className=\"mt-1 text-sm text-slate-600 dark:text-slate-400\">\n                    Accuracy: <b className=\"text-slate-900 dark:text-slate-100\">{todayStat.reviewed ? Math.round((todayStat.correct / todayStat.reviewed) * 100) : 0}%</b> ¬∑ Minuten:{\" \"}\n                    <b className=\"text-slate-900 dark:text-slate-100\">{todayStat.minutes}</b>\n                  </div>\n                </div>\n                <div className=\"rounded-2xl border border-slate-200 bg-white/60 px-4 py-2 text-sm font-semibold dark:border-slate-800 dark:bg-slate-950/60\">\n                  Level <span className=\"font-black\">{computeLevelFromXp(data.profile.xp).level}</span>\n                </div>\n              </div>\n\n              <div className=\"mt-3\">\n                <div className=\"flex items-center justify-between text-xs text-slate-600 dark:text-slate-400\">\n                  <span>XP</span>\n                  <span>\n                    {levelInfo.xpIntoLevel}/{levelInfo.xpNeed}\n                  </span>\n                </div>\n                <div className=\"mt-2 h-3 w-full rounded-full bg-white/60 dark:bg-slate-900/50\">\n                  <div className=\"h-3 rounded-full bg-gradient-to-r from-sky-500 to-indigo-500\" style={{ width: `${Math.round(levelInfo.progress * 100)}%` }} />\n                </div>\n              </div>\n            </CardShell>\n          </div>\n        )}\n\n{view === \"practice\" && (\n  <Practice\n    targetLang={target}\n    nativeLang=\"DE\"\n    cards={allCardsForLang}\n    onCorrect={() => {\n      playTone(\"good\");\n      vibrate(20);\n      bumpStats(true);\n      // Fix: Gesamtes Objekt als AppData casten, um den Level-Typen-Fehler zu umgehen\n      setData((prev) => ({ \n        ...prev, \n        profile: addXp(prev.profile, 6) as unknown as Profile \n      } as AppData));\n      updateStreakIfGoalMet(todayStat.reviewed + 1);\n    }}\n    onWrong={() => {\n      playTone(\"bad\");\n      vibrate(60);\n      bumpStats(false);\n      // Fix: Auch hier den Double Cast anwenden\n      setData((prev) => ({ \n        ...prev, \n        profile: addXp(prev.profile, 2) as unknown as Profile \n      } as AppData));\n      updateStreakIfGoalMet(todayStat.reviewed + 1);\n    }}\n  />\n)}\n\n        {view === \"profile\" && (\n          <div className=\"mt-6 grid gap-4\">\n            <h2 className=\"text-xl font-semibold\">Profil & Fortschritt ({target})</h2>\n\n            <CardShell>\n              <div className=\"flex flex-wrap items-center justify-between gap-3\">\n                <div className=\"flex items-center gap-3\">\n                  <div className=\"grid h-12 w-12 place-items-center rounded-2xl bg-gradient-to-r from-sky-500 to-fuchsia-500 font-black text-white shadow\">\n                    {data.profile.username.slice(0, 1).toUpperCase()}\n                  </div>\n                  <div>\n                    <div className=\"text-lg font-semibold\">{data.profile.username}</div>\n                    <div className=\"text-sm text-slate-600 dark:text-slate-400\">\n                      Deutsch ‚Üí {target} ¬∑ Level <b className=\"text-slate-900 dark:text-slate-100\">{computeLevelFromXp(data.profile.xp).level}</b> ¬∑{\" \"}\n                      <b className=\"text-slate-900 dark:text-slate-100\">{data.profile.xp}</b> XP\n                    </div>\n                  </div>\n                </div>\n\n                <button\n                  className=\"rounded-2xl border border-slate-200 bg-white px-4 py-2 font-semibold shadow-sm hover:shadow dark:border-slate-800 dark:bg-slate-950\"\n                  onClick={() => {\n                    const name = prompt(\"Username √§ndern:\", data.profile.username);\n                    if (!name) return;\n                    setData((prev) => ({ ...prev, profile: { ...prev.profile, username: name } }));\n                  }}\n                >\n                  ‚úèÔ∏è Name\n                </button>\n              </div>\n\n              <div className=\"mt-4 grid grid-cols-2 gap-3 md:grid-cols-4\">\n                <Stat label=\"Streak\" value={data.profile.streak} suffix=\"üî•\" />\n                <Stat label=\"Best\" value={data.profile.bestStreak} suffix=\"üèÜ\" />\n                <Stat label=\"Acc\" value={totalsLang.acc} suffix=\"%\" />\n                <Stat label=\"Minuten\" value={totalsLang.minutes} />\n              </div>\n\n              <div className=\"mt-4\">\n                <div className=\"flex items-center justify-between text-xs text-slate-600 dark:text-slate-400\">\n                  <span>Sprach-Fortschritt</span>\n                  <span>{Math.round(learned.progress * 100)}%</span>\n                </div>\n                <div className=\"mt-2 h-3 w-full rounded-full bg-white/60 dark:bg-slate-900/50\">\n                  <div className=\"h-3 rounded-full bg-gradient-to-r from-emerald-500 to-teal-500\" style={{ width: `${Math.round(learned.progress * 100)}%` }} />\n                </div>\n                <div className=\"mt-2 text-sm text-slate-700 dark:text-slate-200\">\n                  Gelernte W√∂rter: <b>{learned.vocabLearned}</b> (Mastered: <b>{learned.vocabMastered}</b>) ¬∑ Gelernte S√§tze: <b>{learned.sentLearned}</b>\n                </div>\n              </div>\n            </CardShell>\n\n            <CardShell>\n              <div className=\"flex items-center justify-between gap-3\">\n                <div>\n                  <div className=\"text-lg font-semibold\">Achievements</div>\n                  <div className=\"text-sm text-slate-600 dark:text-slate-400\">\n                    Freigeschaltet: <b className=\"text-slate-900 dark:text-slate-100\">{data.achievements.filter((a) => a.unlockedAt).length}</b> / {data.achievements.length}\n                  </div>\n                </div>\n                <button\n                  className=\"rounded-2xl border border-slate-200 bg-white px-4 py-2 font-semibold shadow-sm hover:shadow dark:border-slate-800 dark:bg-slate-950\"\n                  onClick={() => evaluateAchievements()}\n                >\n                  üîç pr√ºfen\n                </button>\n              </div>\n\n              <div className=\"mt-4 grid gap-3 sm:grid-cols-2\">\n                {data.achievements.map((a) => (\n                  <div\n                    key={a.id}\n                    className={`rounded-2xl border p-4 shadow-sm ${\n                      a.unlockedAt\n                        ? \"border-emerald-200 bg-white/70 dark:border-emerald-900 dark:bg-slate-950/60\"\n                        : \"border-slate-200 bg-white/50 opacity-80 dark:border-slate-800 dark:bg-slate-950/40\"\n                    }`}\n                  >\n                    <div className=\"flex items-start gap-3\">\n                      <div className=\"grid h-10 w-10 place-items-center rounded-2xl bg-gradient-to-r from-sky-500 to-fuchsia-500 text-xl text-white shadow\">{a.icon}</div>\n                      <div className=\"min-w-0\">\n                        <div className=\"font-semibold\">\n                          {a.title}{\" \"}\n                          {a.unlockedAt && (\n                            <span className=\"ml-2 rounded-full bg-emerald-100 px-2 py-0.5 text-xs font-semibold text-emerald-700 dark:bg-emerald-900/50 dark:text-emerald-200\">\n                              unlocked\n                            </span>\n                          )}\n                        </div>\n                        <div className=\"text-sm text-slate-600 dark:text-slate-400\">{a.desc}</div>\n                        {a.unlockedAt && <div className=\"mt-1 text-xs text-slate-500 dark:text-slate-400\">{new Date(a.unlockedAt).toLocaleString()}</div>}\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </CardShell>\n\n            <CardShell>\n              <div className=\"text-lg font-semibold\">Analytics ‚Äì letzte 14 Tage ({target})</div>\n\n              <div className=\"mt-3 overflow-auto rounded-2xl border border-slate-200 bg-white/60 dark:border-slate-800 dark:bg-slate-950/60\">\n                <table className=\"w-full text-left text-sm\">\n                  <thead className=\"bg-gradient-to-r from-sky-100 to-fuchsia-100 text-slate-700 dark:from-slate-900 dark:to-slate-900 dark:text-slate-200\">\n                    <tr>\n                      <th className=\"p-3\">Datum</th>\n                      <th className=\"p-3\">Gelernt</th>\n                      <th className=\"p-3\">Richtig</th>\n                      <th className=\"p-3\">Falsch</th>\n                      <th className=\"p-3\">Min</th>\n                    </tr>\n                  </thead>\n                  <tbody className=\"divide-y divide-slate-200 dark:divide-slate-800\">\n                    {last14.map(({ day, s }) => (\n                      <tr key={day}>\n                        <td className=\"p-3\">{day}</td>\n                        <td className=\"p-3\">{s.reviewed}</td>\n                        <td className=\"p-3\">{s.correct}</td>\n                        <td className=\"p-3\">{s.wrong}</td>\n                        <td className=\"p-3\">{s.minutes}</td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              </div>\n            </CardShell>\n          </div>\n        )}\n\n        {view === \"settings\" && (\n          <div className=\"mt-6 grid gap-4\">\n            <h2 className=\"text-xl font-semibold\">Settings</h2>\n\n            <CardShell>\n              <div className=\"grid gap-4 md:grid-cols-2\">\n                <div>\n                  <div className=\"text-sm text-slate-600 dark:text-slate-400\">Lernsprache</div>\n                  <div className=\"mt-2 flex flex-wrap gap-2\">\n                    {([\"EN\", \"ES\", \"FR\", \"RU\"] as Lang[]).map((l) => (\n                      <button\n                        key={l}\n                        onClick={() => {\n                          setData((prev) => ({ ...prev, profile: { ...prev.profile, targetLang: l } }));\n                          // if no cards exist for that language, seed immediately\n                          setTimeout(() => {\n                            setData((prev) => {\n                              const has = prev.cards.some((c) => c.targetLang === l);\n                              if (has) return prev;\n                              return { ...prev, cards: [...seedCardsFromPack(l, prev.profile.level, 30), ...prev.cards] };\n                            });\n                          }, 0);\n                        }}\n                        className={`rounded-2xl border px-4 py-2 font-semibold shadow-sm hover:shadow ${\n                          target === l ? \"border-indigo-200 bg-indigo-50 dark:border-indigo-900 dark:bg-slate-900\" : \"border-slate-200 bg-white dark:border-slate-800 dark:bg-slate-950\"\n                        }`}\n                      >\n                        {l}\n                      </button>\n                    ))}\n                  </div>\n                  <div className=\"mt-2 text-xs text-slate-500 dark:text-slate-400\">Deutsch ist aktuell die Muttersprache (DE).</div>\n                </div>\n\n                <div>\n                  <div className=\"text-sm text-slate-600 dark:text-slate-400\">Level</div>\n                  <div className=\"mt-2 flex flex-wrap gap-2\">\n                    {([\"BEGINNER\", \"INTERMEDIATE\", \"ADVANCED\"] as Level[]).map((lv) => (\n                      <button\n                        key={lv}\n                        onClick={() => setData((prev) => ({ ...prev, profile: { ...prev.profile, level: lv } }))}\n                        className={`rounded-2xl border px-4 py-2 font-semibold shadow-sm hover:shadow ${\n                          data.profile.level === lv ? \"border-emerald-200 bg-emerald-50 dark:border-emerald-900 dark:bg-slate-900\" : \"border-slate-200 bg-white dark:border-slate-800 dark:bg-slate-950\"\n                        }`}\n                      >\n                        {lv === \"BEGINNER\" ? \"Beginner\" : lv === \"INTERMEDIATE\" ? \"Intermediate\" : \"Advanced\"}\n                      </button>\n                    ))}\n                  </div>\n                  <div className=\"mt-2 text-xs text-slate-500 dark:text-slate-400\">Level steuert nur die Mischung (mehr W√∂rter vs. mehr S√§tze).</div>\n                </div>\n\n                <div>\n                  <div className=\"text-sm text-slate-600 dark:text-slate-400\">Tagesziel</div>\n                  <div className=\"mt-2 flex gap-2\">\n                    <input\n                      type=\"number\"\n                      min={5}\n                      max={200}\n                      value={data.profile.dailyGoal}\n                      onChange={(e) =>\n                        setData((prev) => ({ ...prev, profile: { ...prev.profile, dailyGoal: clamp(Number(e.target.value), 5, 200) } }))\n                      }\n                      className=\"w-32 rounded-2xl border border-slate-200 bg-white px-3 py-2 dark:border-slate-800 dark:bg-slate-950\"\n                    />\n                    <div className=\"self-center text-sm text-slate-600 dark:text-slate-400\">Karten / Tag</div>\n                  </div>\n                </div>\n\n                <div>\n                  <div className=\"text-sm text-slate-600 dark:text-slate-400\">Content</div>\n                  <div className=\"mt-2 flex flex-wrap gap-2\">\n                    <button\n                      onClick={() => addMoreStarterCards(25)}\n                      className=\"rounded-2xl bg-gradient-to-r from-sky-500 to-indigo-500 px-4 py-2 font-semibold text-white shadow hover:opacity-90\"\n                    >\n                      Ôºã 25 Starter-Karten\n                    </button>\n                    <button\n                      onClick={() => {\n                        if (!confirm(\"Alles zur√ºcksetzen?\")) return;\n                        const fresh = loadData();\n                        localStorage.setItem(STORAGE_KEY, JSON.stringify(fresh));\n                        setData(fresh);\n                        setView(\"today\");\n                      }}\n                      className=\"rounded-2xl bg-gradient-to-r from-rose-500 to-orange-500 px-4 py-2 font-semibold text-white shadow hover:opacity-90\"\n                    >\n                      Reset\n                    </button>\n                  </div>\n                  <div className=\"mt-2 text-xs text-slate-500 dark:text-slate-400\">\n                    N√§chster Schritt: ‚ÄúDownload Packs‚Äù (online laden ‚Üí offline speichern). Kann ich dir als n√§chstes direkt einbauen.\n                  </div>\n                </div>\n              </div>\n            </CardShell>\n\n            <CardShell>\n              <div className=\"text-sm text-slate-600 dark:text-slate-400\">Palette</div>\n              <div className=\"mt-2 flex flex-wrap gap-2\">\n                {([\"ocean\", \"sunset\", \"lime\", \"grape\"] as AppTheme[]).map((t) => (\n                  <button\n                    key={t}\n                    onClick={() => setPalette(t)}\n                    className={`rounded-2xl border px-4 py-2 font-semibold shadow-sm hover:shadow ${\n                      palette === t ? \"border-indigo-200 bg-indigo-50 dark:border-indigo-900 dark:bg-slate-900\" : \"border-slate-200 bg-white dark:border-slate-800 dark:bg-slate-950\"\n                    }`}\n                  >\n                    {t}\n                  </button>\n                ))}\n              </div>\n            </CardShell>\n          </div>\n        )}\n      </div>\n\n      <BottomNav view={view} setView={setView} />\n    </div>\n  );\n}\n\n/** ===========================================\n * Practice (no typing, only choosing)\n * =========================================== */\nfunction Practice({\n  cards,\n  targetLang,\n  nativeLang,\n  onCorrect,\n  onWrong,\n}: {\n  cards: Card[];\n  targetLang: Lang;\n  nativeLang: \"DE\";\n  onCorrect: () => void;\n  onWrong: () => void;\n}) {\n  const vocab = cards.filter((c) => c.kind === \"vocab\");\n  const sentences = cards.filter((c) => c.kind === \"sentence\");\n\n  const [mode, setMode] = useState<\"wordpick\" | \"mc\">(\"wordpick\");\n  const [choiceCount, setChoiceCount] = useState<3 | 5>(5);\n  const [currentId, setCurrentId] = useState<string>(\"\");\n  const [feedback, setFeedback] = useState<null | { ok: boolean; correct: string }>(null);\n\n  // Initialisierung & Pool-Wechsel\n  useEffect(() => {\n    const pool = mode === \"wordpick\" ? sentences : vocab;\n    if (pool.length > 0) setCurrentId(pool[0].id);\n    setFeedback(null);\n  }, [mode, sentences.length, vocab.length]);\n\n  const current = useMemo(() => {\n    const pool = mode === \"wordpick\" ? sentences : vocab;\n    return pool.find((x) => x.id === currentId) ?? pool[0];\n  }, [mode, currentId, vocab, sentences]);\n\n  // Hilfsvariablen f√ºr Cloze (nur wenn im wordpick Modus)\n  const clozeData = useMemo(() => {\n    if (mode === \"wordpick\" && current) return makeCloze(current.front);\n    return { cloze: \"\", answer: \"\" };\n  }, [current, mode]);\n\n  // N√§chste Karte w√§hlen\n  const goNext = () => {\n    setFeedback(null);\n    const pool = mode === \"wordpick\" ? sentences : vocab;\n    if (pool.length > 1) {\n      const otherCards = pool.filter((c) => c.id !== current?.id);\n      setCurrentId(otherCards[Math.floor(Math.random() * otherCards.length)].id);\n    }\n  };\n\n  // Antwort-Optionen generieren\n  const options = useMemo(() => {\n    if (!current) return [];\n    if (mode === \"wordpick\") {\n      const poolWords = [\n        ...sentences.flatMap((s) => s.front.split(/\\s+/).map((w) => w.replace(/[.,!?;:()]/g, \"\"))),\n        ...vocab.map((v) => v.front),\n      ].filter((w) => w.length >= 3);\n      return makeChoices(clozeData.answer, poolWords, choiceCount);\n    } else {\n      const poolBacks = vocab.map((v) => v.back);\n      return makeChoices(current.back, poolBacks, choiceCount);\n    }\n  }, [current, mode, clozeData.answer, vocab, sentences, choiceCount]);\n\n  if (!current) {\n    return (\n      <div className=\"mt-6 rounded-2xl border border-slate-200 bg-[var(--card)] p-6 text-center\">\n        <div className=\"text-xl font-semibold\">Keine passenden Karten gefunden.</div>\n        <p className=\"text-sm text-slate-500\">F√ºge Karten f√ºr diesen Modus hinzu.</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"mt-6 grid gap-4 animate-in fade-in duration-500\">\n      {/* Header: Modus & Optionen */}\n      <div className=\"flex flex-wrap items-center justify-between gap-2\">\n        <div className=\"flex gap-2\">\n          <ModeBtn active={mode === \"wordpick\"} onClick={() => { setMode(\"wordpick\"); setFeedback(null); }} label=\"Wort w√§hlen\" />\n          <ModeBtn active={mode === \"mc\"} onClick={() => { setMode(\"mc\"); setFeedback(null); }} label=\"Multiple Choice\" />\n        </div>\n        <div className=\"flex items-center gap-2 bg-slate-100 dark:bg-slate-900 p-1 rounded-xl border border-slate-200 dark:border-slate-800\">\n          <SmallToggle active={choiceCount === 3} onClick={() => setChoiceCount(3)} label=\"3\" />\n          <SmallToggle active={choiceCount === 5} onClick={() => setChoiceCount(5)} label=\"5\" />\n        </div>\n      </div>\n\n      {/* Die Lernkarte */}\n      <div className=\"rounded-3xl border border-slate-200 bg-[var(--card)] p-6 shadow-xl dark:border-slate-800\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <div className=\"text-xs font-bold text-slate-400 uppercase tracking-widest\">\n            {mode === \"wordpick\" ? \"Satz vervollst√§ndigen\" : \"√úbersetzung w√§hlen\"}\n          </div>\n          <div className=\"flex gap-2\">\n             <button className=\"rounded-xl bg-slate-100 dark:bg-slate-800 p-2 text-sm\" onClick={() => speak(current.front, TTS_LANG[nativeLang])}>üîä DE</button>\n             <button className=\"rounded-xl bg-slate-100 dark:bg-slate-800 p-2 text-sm\" onClick={() => speak(current.back, TTS_LANG[targetLang])}>üîä {targetLang}</button>\n          </div>\n        </div>\n\n        {/* Die Frage */}\n        <div className=\"text-2xl font-black text-slate-800 dark:text-slate-100 mb-8\">\n          {mode === \"wordpick\" ? clozeData.cloze : current.front}\n        </div>\n\n        {/* Antwortm√∂glichkeiten */}\n        <div className=\"grid gap-3\">\n          {options.map((opt) => (\n            <button\n              key={opt}\n              disabled={!!feedback}\n              onClick={() => {\n                const isCorrect = mode === \"wordpick\" ? opt === clozeData.answer : opt === current.back;\n                setFeedback({ ok: isCorrect, correct: mode === \"wordpick\" ? clozeData.answer : current.back });\n                isCorrect ? onCorrect() : onWrong();\n                if (isCorrect) setTimeout(goNext, 600);\n              }}\n              className={`p-4 text-left rounded-2xl border-2 font-bold transition-all ${\n                feedback?.correct === opt \n                  ? \"border-emerald-500 bg-emerald-50 dark:bg-emerald-900/20 text-emerald-700 dark:text-emerald-400\" \n                  : feedback && opt !== feedback.correct\n                  ? \"opacity-40 border-slate-100 dark:border-slate-900\"\n                  : \"border-slate-100 dark:border-slate-800 bg-white/50 dark:bg-slate-950/50 hover:border-indigo-500 shadow-sm\"\n              }`}\n            >\n              {opt}\n            </button>\n          ))}\n        </div>\n\n        {/* Feedback bei Fehlern */}\n        {feedback && !feedback.ok && (\n          <div className=\"mt-6 p-5 rounded-2xl bg-rose-50 dark:bg-rose-900/20 border-2 border-rose-100 dark:border-rose-900 animate-in slide-in-from-top-2\">\n            <div className=\"text-rose-600 dark:text-rose-400 font-black mb-1\">‚ùå Fast! Richtig ist:</div>\n            <div className=\"text-lg font-bold text-slate-900 dark:text-white underline\">{feedback.correct}</div>\n            <div className=\"mt-2 text-sm italic text-slate-500\">\"{current.back}\"</div>\n            <button onClick={goNext} className=\"mt-4 w-full py-3 bg-slate-900 dark:bg-slate-100 text-white dark:text-slate-900 rounded-xl font-bold shadow-lg\">\n              Weiter ‚Üí\n            </button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n\n  // Multiple Choice: choose correct translation\n  const choices = useMemo(() => {\n    const pool = vocab.map((v) => v.back);\n    return makeChoices(current.back, pool, 4);\n  }, [current.id, current.back, vocab]);\n\n  return (\n    <div className=\"mt-6 grid gap-4\">\n      <div className=\"flex flex-wrap gap-2\">\n        <ModeBtn active={mode === \"wordpick\"} onClick={() => { setMode(\"wordpick\"); setFeedback(null); }} label=\"Wort w√§hlen\" />\n        <ModeBtn active={mode === \"mc\"} onClick={() => { setMode(\"mc\"); setFeedback(null); }} label=\"Multiple Choice\" />\n      </div>\n\n      <div className=\"rounded-2xl border border-slate-200 bg-[var(--card)] p-6 shadow-sm dark:border-slate-800\">\n        <div className=\"flex items-center justify-between gap-2\">\n          <div className=\"text-sm text-slate-600 dark:text-slate-400\">W√§hle die richtige √úbersetzung:</div>\n          <div className=\"flex gap-2\">\n            <button\n              className=\"rounded-xl bg-gradient-to-r from-indigo-500 to-fuchsia-500 px-3 py-1 text-sm font-semibold text-white shadow hover:opacity-90\"\n              onClick={() => speak(current.front, TTS_LANG[nativeLang])}\n              title=\"Vorlesen (DE)\"\n            >\n              üîä DE\n            </button>\n            <button\n              className=\"rounded-xl border border-slate-200 bg-white px-3 py-1 text-sm font-semibold shadow-sm hover:shadow dark:border-slate-800 dark:bg-slate-950\"\n              onClick={stopSpeak}\n              title=\"Stop\"\n            >\n              ‚èπ\n            </button>\n          </div>\n        </div>\n\n        <div className=\"mt-3 text-2xl font-black\">{current.front}</div>\n\n        <div className=\"mt-4 grid gap-3\">\n          {choices.map((c) => (\n            <button\n              key={c}\n              className=\"rounded-2xl border border-slate-200 bg-white/70 px-4 py-3 text-left font-semibold shadow-sm hover:shadow dark:border-slate-800 dark:bg-slate-950/60\"\n              onClick={() => {\n                const ok = c === current.back;\n                ok ? onCorrect() : onWrong();\n                if (vocab.length > 1) setCurrentId(pickRandom(vocab).id);\n              }}\n            >\n              {c}\n            </button>\n          ))}\n        </div>\n\n        {(current.example || current.exampleTranslation) && (\n          <div className=\"mt-5 rounded-2xl border border-slate-200 bg-white/60 p-4 dark:border-slate-800 dark:bg-slate-900/50\">\n            <div className=\"text-sm text-slate-600 dark:text-slate-300\">Beispiel:</div>\n            {current.example && <div className=\"mt-1 font-semibold\">{current.example}</div>}\n            {current.exampleTranslation && <div className=\"mt-1 text-sm text-slate-600 dark:text-slate-300\">{current.exampleTranslation}</div>}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\n/** ===========================================\n * UI\n * =========================================== */\nfunction Header({\n  view,\n  setView,\n  mode,\n  toggleMode,\n  level,\n  xp,\n  targetLang,\n  streak,\n}: {\n  view: View;\n  setView: (v: View) => void;\n  mode: ThemeMode;\n  toggleMode: () => void;\n  level: Level;\n  xp: number;\n  targetLang: Lang;\n  streak: number;\n}) {\n  const lvl = computeLevelFromXp(xp).level;\n  return (\n    <div className=\"flex flex-wrap items-center justify-between gap-3\">\n      <div>\n        <div className=\"text-2xl font-black\">\n          <span className=\"bg-gradient-to-r from-sky-600 via-indigo-600 to-fuchsia-600 bg-clip-text text-transparent dark:from-sky-300 dark:via-indigo-300 dark:to-fuchsia-300\">\n            SprachenlernApp\n          </span>\n        </div>\n        <div className=\"text-sm text-slate-600 dark:text-slate-400\">\n          Deutsch ‚Üí <b className=\"text-slate-900 dark:text-slate-100\">{targetLang}</b> ¬∑ Level{\" \"}\n          <b className=\"text-slate-900 dark:text-slate-100\">{lvl}</b> ¬∑ {level === \"BEGINNER\" ? \"Beginner\" : level === \"INTERMEDIATE\" ? \"Intermediate\" : \"Advanced\"} ¬∑{\" \"}\n          <b className=\"text-slate-900 dark:text-slate-100\">{streak}</b>üî•\n        </div>\n      </div>\n\n      <div className=\"hidden items-center gap-2 md:flex\">\n        <TopButton active={view === \"today\"} onClick={() => setView(\"today\")} label=\"Heute\" />\n        <TopButton active={view === \"practice\"} onClick={() => setView(\"practice\")} label=\"√úbungen\" />\n        <TopButton active={view === \"profile\"} onClick={() => setView(\"profile\")} label=\"Profil\" />\n        <TopButton active={view === \"settings\"} onClick={() => setView(\"settings\")} label=\"Settings\" />\n        <button\n          onClick={toggleMode}\n          className=\"ml-2 rounded-2xl border border-slate-200 bg-white px-4 py-2 font-semibold shadow-sm hover:shadow dark:border-slate-800 dark:bg-slate-950\"\n          title=\"Dark Mode umschalten\"\n        >\n          {mode === \"dark\" ? \"üåô Dark\" : \"‚òÄÔ∏è Light\"}\n        </button>\n      </div>\n    </div>\n  );\n}\nfunction TopButton({ active, onClick, label }: { active: boolean; onClick: () => void; label: string }) {\n  return (\n    <button\n      onClick={onClick}\n      className={`rounded-2xl border px-4 py-2 font-semibold shadow-sm hover:shadow ${\n        active ? \"border-indigo-200 bg-indigo-50 dark:border-indigo-900 dark:bg-slate-900\" : \"border-slate-200 bg-white dark:border-slate-800 dark:bg-slate-950\"\n      }`}\n    >\n      {label}\n    </button>\n  );\n}\nfunction BottomNav({ view, setView }: { view: View; setView: (v: View) => void }) {\n  return (\n    <div className=\"fixed bottom-0 left-0 right-0 border-t border-slate-200 bg-white/80 backdrop-blur dark:border-slate-800 dark:bg-slate-950/70 md:hidden\">\n      <div className=\"mx-auto grid max-w-5xl grid-cols-4 gap-1 p-2\">\n        <NavBtn active={view === \"today\"} onClick={() => setView(\"today\")} label=\"Heute\" />\n        <NavBtn active={view === \"practice\"} onClick={() => setView(\"practice\")} label=\"√úbungen\" />\n        <NavBtn active={view === \"profile\"} onClick={() => setView(\"profile\")} label=\"Profil\" />\n        <NavBtn active={view === \"settings\"} onClick={() => setView(\"settings\")} label=\"Settings\" />\n      </div>\n    </div>\n  );\n}\nfunction NavBtn({ active, onClick, label }: { active: boolean; onClick: () => void; label: string }) {\n  return (\n    <button\n      onClick={onClick}\n      className={`rounded-2xl border px-2 py-2 text-sm font-semibold shadow-sm ${\n        active ? \"border-indigo-200 bg-indigo-50 dark:border-indigo-900 dark:bg-slate-900\" : \"border-slate-200 bg-white dark:border-slate-800 dark:bg-slate-950\"\n      }`}\n    >\n      {label}\n    </button>\n  );\n}\nfunction CardShell({ children }: { children: React.ReactNode }) {\n  return <div className=\"rounded-2xl border border-slate-200 bg-[var(--card)] p-5 shadow-sm dark:border-slate-800\">{children}</div>;\n}\nfunction Pill({ children }: { children: React.ReactNode }) {\n  return <div className=\"rounded-full bg-gradient-to-r from-emerald-500 to-teal-500 px-3 py-1 text-sm font-semibold text-white shadow\">{children}</div>;\n}\nfunction FancyBtn({ variant, onClick, label }: { variant: \"good\" | \"bad\"; onClick: () => void; label: string }) {\n  const cls = variant === \"good\" ? \"from-emerald-500 to-teal-500\" : \"from-rose-500 to-orange-500\";\n  return (\n    <button onClick={onClick} className={`rounded-2xl bg-gradient-to-r ${cls} px-4 py-3 font-semibold text-white shadow hover:opacity-90`}>\n      {label}\n    </button>\n  );\n}\nfunction Stat({ label, value, suffix }: { label: string; value: number; suffix?: string }) {\n  return (\n    <div className=\"rounded-2xl border border-slate-200 bg-white/70 p-4 shadow-sm dark:border-slate-800 dark:bg-slate-950/60\">\n      <div className=\"text-sm text-slate-600 dark:text-slate-400\">{label}</div>\n      <div className=\"mt-1 text-2xl font-black bg-gradient-to-r from-sky-600 to-fuchsia-600 bg-clip-text text-transparent dark:from-sky-300 dark:to-fuchsia-300\">\n        {value}\n        {suffix ? <span className=\"ml-1 text-base font-semibold\">{suffix}</span> : null}\n      </div>\n    </div>\n  );\n}\nfunction ModeBtn({ active, onClick, label }: { active: boolean; onClick: () => void; label: string }) {\n  return (\n    <button\n      onClick={onClick}\n      className={`rounded-2xl border px-4 py-2 font-semibold ${active ? \"bg-indigo-50 dark:bg-slate-900\" : \"bg-white dark:bg-slate-950\"} border-slate-200 shadow-sm hover:shadow dark:border-slate-800`}\n    >\n      {label}\n    </button>\n  );\n}\nfunction SmallToggle({ active, onClick, label }: { active: boolean; onClick: () => void; label: string }) {\n  return (\n    <button\n      onClick={onClick}\n      className={`rounded-2xl border px-3 py-1 text-sm font-semibold shadow-sm hover:shadow dark:border-slate-800 ${\n        active ? \"border-indigo-200 bg-indigo-50 dark:bg-slate-900\" : \"border-slate-200 bg-white dark:bg-slate-950\"\n      }`}\n    >\n      {label}\n    </button>\n  );\n}\n"],"names":[],"mappings":"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"}