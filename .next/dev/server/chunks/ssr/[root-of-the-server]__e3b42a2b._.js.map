{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/singl/Desktop/Github%20Projekte/Sprachenlernen%20App%20f%C3%BCr%20Android/lingua-mvp/V.3%20-%20Sprachauswahl%2C%20User%20Friendly/src/app/page.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useEffect, useMemo, useRef, useState } from \"react\";\n\n/** ===========================================\n *  SprachenlernApp ‚Äì Auto-Language Mode\n *  Tabs: Heute | √úbungen | Profil | Settings\n *  - User w√§hlt nur Lernsprache (Target)\n *  - Content wird automatisch aus Starter-Packs gef√ºllt (offline)\n *  - SRS + √úbungen (nur klicken)\n *  - Fortschritt/Analytics pro Sprache\n *  - TTS + Success/Fail Sound + Vibrate\n * =========================================== */\n\ntype View = \"today\" | \"practice\" | \"profile\" | \"settings\";\ntype ThemeMode = \"light\" | \"dark\";\ntype AppTheme = \"ocean\" | \"sunset\" | \"lime\" | \"grape\";\n\ntype Lang = \"EN\" | \"ES\" | \"FR\" | \"RU\";\ntype Level = \"BEGINNER\" | \"INTERMEDIATE\" | \"ADVANCED\";\ntype CardKind = \"vocab\" | \"sentence\";\n\ntype Card = {\n  id: string;\n  targetLang: Lang;\n  kind: CardKind;\n  front: string; // source/native (DE)\n  back: string;  // target\n  example?: string;\n  exampleTranslation?: string;\n\n  due: number;\n  intervalDays: number;\n  ease: number;\n  lapses: number;\n  lastReviewed?: number;\n};\n\ntype DailyStat = { reviewed: number; correct: number; wrong: number; minutes: number };\n\ntype Profile = {\n  username: string;\n  nativeLang: \"DE\";\n  targetLang: Lang;\n  level: Level;\n  dailyGoal: number;\n  xp: number;\n  streak: number;\n  bestStreak: number;\n  lastActiveDay: string; // YYYY-MM-DD\n  createdAt: number;\n};\n\ntype Achievement = {\n  id: string;\n  title: string;\n  desc: string;\n  icon: string;\n  unlockedAt?: number;\n};\n\ntype AppData = {\n  cards: Card[];\n  profile: Profile;\n  achievements: Achievement[];\n  dailyStatsByLang: Record<Lang, Record<string, DailyStat>>;\n};\n\nconst STORAGE_KEY = \"sprachapp_auto_v1\";\nconst THEME_KEY = \"sprachapp_theme_mode_v1\";\nconst PALETTE_KEY = \"sprachapp_palette_v1\";\n\nconst THEME_CLASS: Record<AppTheme, string> = {\n  ocean: \"theme-ocean\",\n  sunset: \"theme-sunset\",\n  lime: \"theme-lime\",\n  grape: \"theme-grape\",\n};\n\nconst TTS_LANG: Record<Lang | \"DE\", string> = {\n  DE: \"de-DE\",\n  EN: \"en-US\",\n  ES: \"es-ES\",\n  FR: \"fr-FR\",\n  RU: \"ru-RU\",\n};\n\n/** ---------- Starter Packs (offline) ----------\n *  Kleines Starter-Pack ‚Äì wir k√∂nnen sp√§ter massiv erweitern / Download-Packs bauen.\n */\nconst PACKS: Record<Lang, { vocab: Array<{ de: string; x: string; ex?: string; exTr?: string }>; sentences: Array<{ de: string; x: string }> }> =\n  {\n    EN: {\n      vocab: [\n        { de: \"laufen\", x: \"to run\", ex: \"Ich laufe jeden Morgen.\", exTr: \"I run every morning.\" },\n        { de: \"essen\", x: \"to eat\", ex: \"Ich esse gern Pasta.\", exTr: \"I like eating pasta.\" },\n        { de: \"trinken\", x: \"to drink\", ex: \"Trinkst du Wasser?\", exTr: \"Are you drinking water?\" },\n        { de: \"Zeit\", x: \"time\", ex: \"Ich habe keine Zeit.\", exTr: \"I have no time.\" },\n        { de: \"Freund\", x: \"friend\", ex: \"Er ist mein Freund.\", exTr: \"He is my friend.\" },\n        { de: \"lernen\", x: \"to learn\", ex: \"Ich lerne Englisch.\", exTr: \"I am learning English.\" },\n        { de: \"Arbeit\", x: \"work\", ex: \"Ich gehe zur Arbeit.\", exTr: \"I go to work.\" },\n        { de: \"Haus\", x: \"house\", ex: \"Das Haus ist gro√ü.\", exTr: \"The house is big.\" },\n        { de: \"Buch\", x: \"book\", ex: \"Das Buch ist interessant.\", exTr: \"The book is interesting.\" },\n        { de: \"heute\", x: \"today\", ex: \"Heute ist Montag.\", exTr: \"Today is Monday.\" },\n      ],\n      sentences: [\n        { de: \"Ich gehe heute nicht zur Arbeit.\", x: \"I am not going to work today.\" },\n        { de: \"Kannst du mir bitte helfen?\", x: \"Can you please help me?\" },\n        { de: \"Wie sp√§t ist es?\", x: \"What time is it?\" },\n        { de: \"Ich verstehe das nicht.\", x: \"I don't understand that.\" },\n        { de: \"Ich m√∂chte einen Kaffee.\", x: \"I would like a coffee.\" },\n      ],\n    },\n    ES: {\n      vocab: [\n        { de: \"Hallo\", x: \"hola\" },\n        { de: \"bitte\", x: \"por favor\" },\n        { de: \"danke\", x: \"gracias\" },\n        { de: \"Wasser\", x: \"agua\" },\n        { de: \"essen\", x: \"comer\" },\n        { de: \"trinken\", x: \"beber\" },\n        { de: \"Haus\", x: \"casa\" },\n        { de: \"Freund\", x: \"amigo\" },\n        { de: \"Zeit\", x: \"tiempo\" },\n        { de: \"heute\", x: \"hoy\" },\n      ],\n      sentences: [\n        { de: \"Ich m√∂chte einen Kaffee, bitte.\", x: \"Quisiera un caf√©, por favor.\" },\n        { de: \"Ich verstehe das nicht.\", x: \"No entiendo eso.\" },\n        { de: \"Wo ist die Toilette?\", x: \"¬øD√≥nde est√° el ba√±o?\" },\n        { de: \"Kannst du mir helfen?\", x: \"¬øPuedes ayudarme?\" },\n        { de: \"Wie sp√§t ist es?\", x: \"¬øQu√© hora es?\" },\n      ],\n    },\n    FR: {\n      vocab: [\n        { de: \"Hallo\", x: \"bonjour\" },\n        { de: \"bitte\", x: \"s'il vous pla√Æt\" },\n        { de: \"danke\", x: \"merci\" },\n        { de: \"Wasser\", x: \"eau\" },\n        { de: \"essen\", x: \"manger\" },\n        { de: \"trinken\", x: \"boire\" },\n        { de: \"Haus\", x: \"maison\" },\n        { de: \"Freund\", x: \"ami\" },\n        { de: \"Zeit\", x: \"temps\" },\n        { de: \"heute\", x: \"aujourd'hui\" },\n      ],\n      sentences: [\n        { de: \"Ich m√∂chte einen Kaffee, bitte.\", x: \"Je voudrais un caf√©, s'il vous pla√Æt.\" },\n        { de: \"Ich verstehe das nicht.\", x: \"Je ne comprends pas.\" },\n        { de: \"Wo ist die Toilette?\", x: \"O√π sont les toilettes ?\" },\n        { de: \"Kannst du mir helfen?\", x: \"Peux-tu m'aider ?\" },\n        { de: \"Wie sp√§t ist es?\", x: \"Quelle heure est-il ?\" },\n      ],\n    },\n    RU: {\n      vocab: [\n        { de: \"Hallo\", x: \"–ø—Ä–∏–≤–µ—Ç\" },\n        { de: \"bitte\", x: \"–ø–æ–∂–∞–ª—É–π—Å—Ç–∞\" },\n        { de: \"danke\", x: \"—Å–ø–∞—Å–∏–±–æ\" },\n        { de: \"Wasser\", x: \"–≤–æ–¥–∞\" },\n        { de: \"essen\", x: \"–µ—Å—Ç—å\" },\n        { de: \"trinken\", x: \"–ø–∏—Ç—å\" },\n        { de: \"Haus\", x: \"–¥–æ–º\" },\n        { de: \"Freund\", x: \"–¥—Ä—É–≥\" },\n        { de: \"Zeit\", x: \"–≤—Ä–µ–º—è\" },\n        { de: \"heute\", x: \"—Å–µ–≥–æ–¥–Ω—è\" },\n      ],\n      sentences: [\n        { de: \"Ich verstehe das nicht.\", x: \"–Ø –Ω–µ –ø–æ–Ω–∏–º–∞—é.\" },\n        { de: \"Kannst du mir helfen?\", x: \"–¢—ã –º–æ–∂–µ—à—å –º–Ω–µ –ø–æ–º–æ—á—å?\" },\n        { de: \"Wie sp√§t ist es?\", x: \"–ö–æ—Ç–æ—Ä—ã–π —á–∞—Å?\" },\n        { de: \"Ich m√∂chte einen Kaffee, bitte.\", x: \"–Ø —Ö–æ—Ç–µ–ª(–∞) –±—ã –∫–æ—Ñ–µ, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞.\" },\n        { de: \"Wo ist die Toilette?\", x: \"–ì–¥–µ —Ç—É–∞–ª–µ—Ç?\" },\n      ],\n    },\n  };\n\n/** ---------- Helpers ---------- */\nfunction uid() {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const c: any = globalThis.crypto;\n  if (c?.randomUUID) return c.randomUUID();\n  return Math.random().toString(36).slice(2) + Date.now().toString(36);\n}\nfunction pad2(n: number) {\n  return String(n).padStart(2, \"0\");\n}\nfunction todayKey(d = new Date()) {\n  return `${d.getFullYear()}-${pad2(d.getMonth() + 1)}-${pad2(d.getDate())}`;\n}\nfunction clamp(n: number, a: number, b: number) {\n  return Math.max(a, Math.min(b, n));\n}\nfunction pickRandom<T>(arr: T[]) {\n  return arr[Math.floor(Math.random() * arr.length)];\n}\nfunction escapeRegExp(s: string) {\n  return s.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\");\n}\nfunction diffDays(a: string, b: string) {\n  const [ay, am, ad] = a.split(\"-\").map(Number);\n  const [by, bm, bd] = b.split(\"-\").map(Number);\n  const da = new Date(ay, am - 1, ad).getTime();\n  const db = new Date(by, bm - 1, bd).getTime();\n  return Math.round((db - da) / (24 * 60 * 60 * 1000));\n}\n\n/** ---------- SRS (light) ---------- */\nfunction schedule(card: Card, correct: boolean): Card {\n  const now = Date.now();\n  let ease = card.ease;\n  let intervalDays = card.intervalDays;\n\n  if (correct) {\n    ease = clamp(ease + 0.05, 1.3, 2.8);\n    if (intervalDays <= 0) intervalDays = 1;\n    else if (intervalDays === 1) intervalDays = 3;\n    else intervalDays = Math.round(intervalDays * ease);\n  } else {\n    ease = clamp(ease - 0.15, 1.3, 2.8);\n    intervalDays = 0;\n  }\n\n  const due = now + (correct ? intervalDays : 0.25) * 24 * 60 * 60 * 1000; // wrong => retry in ~6h\n  return {\n    ...card,\n    ease,\n    intervalDays,\n    due,\n    lapses: correct ? card.lapses : card.lapses + 1,\n    lastReviewed: now,\n  };\n}\n\n/** ---------- Practice helpers (word-choice cloze) ---------- */\nfunction makeCloze(sentence: string) {\n  const cleanedWords = sentence\n    .split(/\\s+/)\n    .map((w) => w.replace(/[.,!?;:()\"‚Äû‚Äú‚Äù‚Äú'‚Äô]/g, \"\"))\n    .filter(Boolean);\n\n  const candidates = cleanedWords.filter((w) => w.length >= 4);\n  const answer = candidates.length ? pickRandom(candidates) : cleanedWords[cleanedWords.length - 1] ?? \"\";\n  const re = new RegExp(`\\\\b${escapeRegExp(answer)}\\\\b`);\n  const cloze = sentence.replace(re, \"____\");\n  return { cloze, answer };\n}\nfunction makeChoices(correct: string, pool: string[], n = 4) {\n  const wrongs = pool.filter((x) => x !== correct);\n  const picks = new Set<string>([correct]);\n  while (picks.size < n && wrongs.length) picks.add(pickRandom(wrongs));\n  return Array.from(picks).sort(() => Math.random() - 0.5);\n}\n\n/** ---------- Audio feedback ---------- */\nfunction playTone(type: \"good\" | \"bad\") {\n  if (typeof window === \"undefined\") return;\n  const AudioCtx = window.AudioContext || (window as any).webkitAudioContext;\n  if (!AudioCtx) return;\n\n  const ctx = new AudioCtx();\n  const o = ctx.createOscillator();\n  const g = ctx.createGain();\n  o.type = \"sine\";\n\n  const now = ctx.currentTime;\n  if (type === \"good\") {\n    o.frequency.setValueAtTime(784, now);\n    o.frequency.exponentialRampToValueAtTime(1046.5, now + 0.12);\n    g.gain.setValueAtTime(0.0001, now);\n    g.gain.exponentialRampToValueAtTime(0.15, now + 0.01);\n    g.gain.exponentialRampToValueAtTime(0.0001, now + 0.18);\n    o.connect(g);\n    g.connect(ctx.destination);\n    o.start(now);\n    o.stop(now + 0.2);\n  } else {\n    o.frequency.setValueAtTime(220, now);\n    o.frequency.exponentialRampToValueAtTime(155, now + 0.18);\n    g.gain.setValueAtTime(0.0001, now);\n    g.gain.exponentialRampToValueAtTime(0.18, now + 0.01);\n    g.gain.exponentialRampToValueAtTime(0.0001, now + 0.22);\n    o.connect(g);\n    g.connect(ctx.destination);\n    o.start(now);\n    o.stop(now + 0.24);\n  }\n\n  setTimeout(() => ctx.close().catch(() => {}), 400);\n}\nfunction vibrate(ms: number) {\n  if (typeof window === \"undefined\") return;\n  navigator.vibrate?.(ms);\n}\n\n/** ---------- Robust TTS voice picking ---------- */\nfunction speak(text: string, lang?: string) {\n  if (typeof window === \"undefined\" || !(\"speechSynthesis\" in window)) return;\n  const synth = window.speechSynthesis;\n  const utter = new SpeechSynthesisUtterance(text);\n  const targetLang = lang || \"en-US\";\n\n  function pickVoiceAndSpeak() {\n    const voices = synth.getVoices();\n    if (!voices.length) return;\n\n    const primary = targetLang.split(\"-\")[0].toLowerCase();\n    const voice =\n      voices.find((v) => v.lang?.toLowerCase() === targetLang.toLowerCase()) ||\n      voices.find((v) => v.lang?.toLowerCase().startsWith(primary)) ||\n      voices[0];\n\n    if (voice) utter.voice = voice;\n    utter.lang = voice?.lang || targetLang;\n\n    synth.cancel();\n    synth.speak(utter);\n  }\n\n  if (synth.getVoices().length === 0) {\n    synth.onvoiceschanged = pickVoiceAndSpeak;\n  } else {\n    pickVoiceAndSpeak();\n  }\n}\nfunction stopSpeak() {\n  if (typeof window === \"undefined\") return;\n  window.speechSynthesis?.cancel();\n}\n\n/** ---------- Gamification ---------- */\nfunction xpForLevel(level: number) {\n  return Math.round(100 * Math.pow(level, 1.2));\n}\nfunction computeLevelFromXp(totalXp: number) {\n  let lvl = 1;\n  let xp = totalXp;\n  while (xp >= xpForLevel(lvl) && lvl < 200) {\n    xp -= xpForLevel(lvl);\n    lvl += 1;\n  }\n  const need = xpForLevel(lvl);\n  const progress = need === 0 ? 0 : clamp(xp / need, 0, 1);\n  return { level: lvl, xpIntoLevel: xp, xpNeed: need, progress };\n}\nfunction addXp(profile: Profile, amount: number) {\n  const newXp = Math.max(0, profile.xp + amount);\n  const { level } = computeLevelFromXp(newXp);\n  return { ...profile, xp: newXp, /* derived */ lastActiveDay: profile.lastActiveDay, streak: profile.streak, bestStreak: profile.bestStreak, level };\n}\nfunction defaultAchievements(): Achievement[] {\n  return [\n    { id: \"first10\", title: \"Erste Schritte\", desc: \"Lerne 10 Karten\", icon: \"‚ú®\" },\n    { id: \"streak3\", title: \"Konsequent\", desc: \"3 Tage Streak\", icon: \"üî•\" },\n    { id: \"streak7\", title: \"Eine Woche\", desc: \"7 Tage Streak\", icon: \"üèÖ\" },\n    { id: \"review100\", title: \"Hundert\", desc: \"Lerne 100 Karten\", icon: \"üíØ\" },\n    { id: \"perfect20day\", title: \"Sauber!\", desc: \"20 richtige an einem Tag\", icon: \"üéØ\" },\n    { id: \"nightowl\", title: \"Night Owl\", desc: \"Lerne nach 23:00\", icon: \"üåô\" },\n  ];\n}\n\n/** ---------- Data load/save ---------- */\nfunction loadData(): AppData {\n  const raw = typeof window !== \"undefined\" ? localStorage.getItem(STORAGE_KEY) : null;\n  if (raw) return JSON.parse(raw) as AppData;\n\n  const now = Date.now();\n  const prof: Profile = {\n    username: \"Learner\",\n    nativeLang: \"DE\",\n    targetLang: \"EN\",\n    level: \"BEGINNER\",\n    dailyGoal: 20,\n    xp: 0,\n    streak: 0,\n    bestStreak: 0,\n    lastActiveDay: todayKey(),\n    createdAt: now,\n  };\n\n  const seed = seedCardsFromPack(\"EN\", \"BEGINNER\", 30);\n\n  return {\n    cards: seed,\n    profile: prof,\n    achievements: defaultAchievements(),\n    dailyStatsByLang: { EN: {}, ES: {}, FR: {}, RU: {} },\n  };\n}\nfunction saveData(data: AppData) {\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(data));\n}\n\n/** ---------- Seeding logic (auto content) ---------- */\nfunction seedCardsFromPack(targetLang: Lang, level: Level, maxCards: number) {\n  const pack = PACKS[targetLang];\n  const now = Date.now();\n\n  // simple level scaling: beginner uses more vocab than sentences; advanced more sentences\n  const vocabRatio = level === \"BEGINNER\" ? 0.7 : level === \"INTERMEDIATE\" ? 0.55 : 0.45;\n  const vocabCount = Math.max(5, Math.round(maxCards * vocabRatio));\n  const sentCount = Math.max(3, maxCards - vocabCount);\n\n  const vocabs = pack.vocab.slice(0, vocabCount).map((v) => ({\n    id: uid(),\n    targetLang,\n    kind: \"vocab\" as const,\n    front: v.de,\n    back: v.x,\n    example: v.ex,\n    exampleTranslation: v.exTr,\n    due: now,\n    intervalDays: 0,\n    ease: 2.0,\n    lapses: 0,\n  }));\n\n  const sents = pack.sentences.slice(0, sentCount).map((s) => ({\n    id: uid(),\n    targetLang,\n    kind: \"sentence\" as const,\n    front: s.de,\n    back: s.x,\n    due: now,\n    intervalDays: 0,\n    ease: 2.0,\n    lapses: 0,\n  }));\n\n  return [...vocabs, ...sents].slice(0, maxCards);\n}\n\n/** ===========================================\n * Page\n * =========================================== */\nexport default function Page() {\n  const [data, setData] = useState<AppData>(() => loadData());\n  const [view, setView] = useState<View>(\"today\");\n\n  const [mode, setMode] = useState<ThemeMode>(\"light\");\n  const [palette, setPalette] = useState<AppTheme>(\"ocean\");\n\n  const sessionStartRef = useRef<number>(Date.now());\n\n  useEffect(() => saveData(data), [data]);\n\n  /** theme init */\n  useEffect(() => {\n    const saved = (localStorage.getItem(THEME_KEY) as ThemeMode | null) ?? \"light\";\n    setMode(saved);\n    document.documentElement.classList.toggle(\"dark\", saved === \"dark\");\n  }, []);\n  useEffect(() => {\n    localStorage.setItem(THEME_KEY, mode);\n    document.documentElement.classList.toggle(\"dark\", mode === \"dark\");\n  }, [mode]);\n\n  /** palette init */\n  useEffect(() => {\n    const saved = (localStorage.getItem(PALETTE_KEY) as AppTheme | null) ?? \"ocean\";\n    setPalette(saved);\n  }, []);\n  useEffect(() => {\n    localStorage.setItem(PALETTE_KEY, palette);\n    Object.values(THEME_CLASS).forEach((cls) => document.documentElement.classList.remove(cls));\n    document.documentElement.classList.add(THEME_CLASS[palette]);\n  }, [palette]);\n\n  /** streak day rollover */\n  useEffect(() => {\n    const today = todayKey();\n    setData((prev) => {\n      const p = prev.profile;\n      const delta = diffDays(p.lastActiveDay, today);\n      if (delta <= 0) return prev;\n      // if missed days => reset streak (we keep it simple)\n      if (delta >= 2) return { ...prev, profile: { ...p, streak: 0, lastActiveDay: today } };\n      return { ...prev, profile: { ...p, lastActiveDay: today } };\n    });\n  }, []);\n\n  const target = data.profile.targetLang;\n\n  /** ensure we always have some cards for selected language */\n  useEffect(() => {\n    const has = data.cards.some((c) => c.targetLang === target);\n    if (has) return;\n\n    setData((prev) => ({\n      ...prev,\n      cards: [...seedCardsFromPack(prev.profile.targetLang, prev.profile.level, 30), ...prev.cards],\n    }));\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [target]);\n\n  const allCardsForLang = useMemo(() => data.cards.filter((c) => c.targetLang === target), [data.cards, target]);\n\n  const dueCards = useMemo(() => {\n    const now = Date.now();\n    return allCardsForLang.filter((c) => c.due <= now).sort((a, b) => a.due - b.due);\n  }, [allCardsForLang]);\n\n  const nextCard = dueCards[0];\n\n  const todayStat = useMemo(() => {\n    const k = todayKey();\n    return data.dailyStatsByLang[target]?.[k] ?? { reviewed: 0, correct: 0, wrong: 0, minutes: 0 };\n  }, [data.dailyStatsByLang, target]);\n\n  function addMinutesSinceLastTick() {\n    const now = Date.now();\n    const elapsed = now - sessionStartRef.current;\n    if (elapsed < 30_000) return 0;\n    const minutes = Math.floor(elapsed / 60_000);\n    if (minutes <= 0) return 0;\n    sessionStartRef.current = now;\n    return minutes;\n  }\n\n  function bumpStats(correct: boolean) {\n    const k = todayKey();\n    const addMin = addMinutesSinceLastTick();\n\n    setData((prev) => {\n      const byLang = { ...prev.dailyStatsByLang };\n      const langMap = { ...(byLang[target] ?? {}) };\n      const cur = langMap[k] ?? { reviewed: 0, correct: 0, wrong: 0, minutes: 0 };\n      langMap[k] = {\n        reviewed: cur.reviewed + 1,\n        correct: cur.correct + (correct ? 1 : 0),\n        wrong: cur.wrong + (correct ? 0 : 1),\n        minutes: cur.minutes + addMin,\n      };\n      byLang[target] = langMap;\n      return { ...prev, dailyStatsByLang: byLang };\n    });\n  }\n\n  function updateStreakIfGoalMet(nextReviewed: number) {\n    const today = todayKey();\n    setData((prev) => {\n      const p = prev.profile;\n      if (nextReviewed < p.dailyGoal) return prev;\n\n      // if already \"counted today\", no extra action\n      if (p.lastActiveDay === today && p.streak > 0) {\n        return { ...prev, profile: { ...p, bestStreak: Math.max(p.bestStreak, p.streak), lastActiveDay: today } };\n      }\n\n      const delta = diffDays(p.lastActiveDay, today);\n      let streak = p.streak;\n      if (delta === 0) streak = p.streak;\n      else if (delta === 1) streak = p.streak + 1;\n      else streak = 1;\n\n      return { ...prev, profile: { ...p, streak, bestStreak: Math.max(p.bestStreak, streak), lastActiveDay: today } };\n    });\n  }\n\n  function unlockAchievement(id: string) {\n    setData((prev) => {\n      const idx = prev.achievements.findIndex((a) => a.id === id);\n      if (idx < 0) return prev;\n      if (prev.achievements[idx].unlockedAt) return prev;\n      const updated = [...prev.achievements];\n      updated[idx] = { ...updated[idx], unlockedAt: Date.now() };\n      return { ...prev, achievements: updated };\n    });\n  }\n\n  function evaluateAchievements() {\n    const k = todayKey();\n    const t = data.dailyStatsByLang[target]?.[k] ?? { reviewed: 0, correct: 0, wrong: 0, minutes: 0 };\n\n    const totalReviewedAllLang = (Object.values(data.dailyStatsByLang) as any[]).flatMap((m) => Object.values(m)).reduce((s, d: DailyStat) => s + (d.reviewed || 0), 0);\n\n    if (totalReviewedAllLang >= 10) unlockAchievement(\"first10\");\n    if (totalReviewedAllLang >= 100) unlockAchievement(\"review100\");\n    if (data.profile.streak >= 3) unlockAchievement(\"streak3\");\n    if (data.profile.streak >= 7) unlockAchievement(\"streak7\");\n    if (t.correct >= 20) unlockAchievement(\"perfect20day\");\n    if (new Date().getHours() >= 23) unlockAchievement(\"nightowl\");\n  }\n\n  useEffect(() => {\n    evaluateAchievements();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [data.dailyStatsByLang, data.profile.streak, data.profile.targetLang]);\n\n  /** learned definitions */\n  const learnedThreshold = 3; // days\n  const masteredThreshold = 7;\n\n  const learned = useMemo(() => {\n    const vocabLearned = allCardsForLang.filter((c) => c.kind === \"vocab\" && c.intervalDays >= learnedThreshold).length;\n    const vocabMastered = allCardsForLang.filter((c) => c.kind === \"vocab\" && c.intervalDays >= masteredThreshold).length;\n    const sentLearned = allCardsForLang.filter((c) => c.kind === \"sentence\" && c.intervalDays >= learnedThreshold).length;\n    const total = allCardsForLang.length || 1;\n    const learnedTotal = vocabLearned + sentLearned;\n    return { vocabLearned, vocabMastered, sentLearned, learnedTotal, total, progress: clamp(learnedTotal / total, 0, 1) };\n  }, [allCardsForLang]);\n\n  const goalProgress = clamp(todayStat.reviewed / Math.max(1, data.profile.dailyGoal), 0, 1);\n  const goalMet = todayStat.reviewed >= data.profile.dailyGoal;\n\n  const levelInfo = useMemo(() => computeLevelFromXp(data.profile.xp), [data.profile.xp]);\n\n  const last14 = useMemo(() => {\n    const days: { day: string; s: DailyStat }[] = [];\n    const base = new Date();\n    for (let i = 13; i >= 0; i--) {\n      const d = new Date(base);\n      d.setDate(d.getDate() - i);\n      const key = todayKey(d);\n      const s = data.dailyStatsByLang[target]?.[key] ?? { reviewed: 0, correct: 0, wrong: 0, minutes: 0 };\n      days.push({ day: key, s });\n    }\n    return days;\n  }, [data.dailyStatsByLang, target]);\n\n  const totalsLang = useMemo(() => {\n    const all = Object.values(data.dailyStatsByLang[target] ?? {});\n    const reviewed = all.reduce((a, x) => a + (x.reviewed || 0), 0);\n    const correct = all.reduce((a, x) => a + (x.correct || 0), 0);\n    const wrong = all.reduce((a, x) => a + (x.wrong || 0), 0);\n    const minutes = all.reduce((a, x) => a + (x.minutes || 0), 0);\n    const acc = reviewed ? Math.round((correct / reviewed) * 100) : 0;\n    return { reviewed, correct, wrong, minutes, acc };\n  }, [data.dailyStatsByLang, target]);\n\n  /** main review */\n  function review(correct: boolean) {\n    if (!nextCard) return;\n\n    playTone(correct ? \"good\" : \"bad\");\n    vibrate(correct ? 20 : 60);\n\n    bumpStats(correct);\n    setData((prev) => ({ ...prev, profile: addXp(prev.profile, correct ? 10 : 3) }));\n\n    setData((prev) => ({\n      ...prev,\n      cards: prev.cards.map((c) => (c.id === nextCard.id ? schedule(c, correct) : c)),\n    }));\n\n    const nextReviewed = todayStat.reviewed + 1;\n    updateStreakIfGoalMet(nextReviewed);\n\n    // small session bonus\n    if (nextReviewed > 0 && nextReviewed % 20 === 0) {\n      setData((prev) => ({ ...prev, profile: addXp(prev.profile, 20) }));\n    }\n  }\n\n  function addMoreStarterCards(n: number) {\n    setData((prev) => {\n      const existingKeys = new Set(prev.cards.filter((c) => c.targetLang === prev.profile.targetLang).map((c) => `${c.kind}::${c.front}::${c.back}`));\n      const fresh = seedCardsFromPack(prev.profile.targetLang, prev.profile.level, n * 2).filter((c) => !existingKeys.has(`${c.kind}::${c.front}::${c.back}`));\n      return { ...prev, cards: [...fresh.slice(0, n), ...prev.cards] };\n    });\n  }\n\n  /** UI */\n  return (\n    <div className=\"min-h-screen bg-gradient-to-b from-[var(--bg1)] via-[var(--bg2)] to-[var(--bg3)] text-slate-900 dark:text-slate-50\">\n      <div className=\"mx-auto max-w-5xl px-4 pb-24 pt-6\">\n        <Header\n          view={view}\n          setView={setView}\n          mode={mode}\n          toggleMode={() => setMode((t) => (t === \"dark\" ? \"light\" : \"dark\"))}\n          level={data.profile.level}\n          xp={data.profile.xp}\n          targetLang={target}\n          streak={data.profile.streak}\n        />\n\n        {view === \"today\" && (\n          <div className=\"mt-6 grid gap-4\">\n            <CardShell>\n              <div className=\"flex flex-wrap items-center justify-between gap-3\">\n                <div>\n                  <div className=\"text-sm text-slate-500 dark:text-slate-400\">Lernsprache</div>\n                  <div className=\"text-lg font-semibold\">Deutsch ‚Üí {target}</div>\n                  <div className=\"mt-1 text-sm text-slate-600 dark:text-slate-400\">\n                    <b className=\"text-slate-900 dark:text-slate-100\">{dueCards.length}</b> f√§llig ¬∑{\" \"}\n                    <b className=\"text-slate-900 dark:text-slate-100\">{todayStat.reviewed}</b> heute ¬∑{\" \"}\n                    <b className=\"text-slate-900 dark:text-slate-100\">{data.profile.streak}</b>üî• Streak\n                  </div>\n                </div>\n                <Pill>{goalMet ? \"‚úÖ Ziel\" : `${data.profile.dailyGoal} / Tag`}</Pill>\n              </div>\n\n              <div className=\"mt-4\">\n                <div className=\"flex items-center justify-between text-xs text-slate-600 dark:text-slate-400\">\n                  <span>Tagesziel</span>\n                  <span>\n                    {todayStat.reviewed}/{data.profile.dailyGoal}\n                  </span>\n                </div>\n                <div className=\"mt-2 h-3 w-full rounded-full bg-white/60 dark:bg-slate-900/50\">\n                  <div className=\"h-3 rounded-full bg-gradient-to-r from-emerald-500 to-teal-500\" style={{ width: `${Math.round(goalProgress * 100)}%` }} />\n                </div>\n\n                <div className=\"mt-4\">\n                  <div className=\"flex items-center justify-between text-xs text-slate-600 dark:text-slate-400\">\n                    <span>Sprach-Fortschritt (gelernt)</span>\n                    <span>\n                      {learned.learnedTotal}/{learned.total}\n                    </span>\n                  </div>\n                  <div className=\"mt-2 h-3 w-full rounded-full bg-white/60 dark:bg-slate-900/50\">\n                    <div className=\"h-3 rounded-full bg-gradient-to-r from-sky-500 to-indigo-500\" style={{ width: `${Math.round(learned.progress * 100)}%` }} />\n                  </div>\n                  <div className=\"mt-2 text-sm text-slate-700 dark:text-slate-200\">\n                    Gelernte W√∂rter: <b>{learned.vocabLearned}</b> (Mastered: <b>{learned.vocabMastered}</b>) ¬∑ Gelernte S√§tze: <b>{learned.sentLearned}</b>\n                  </div>\n                </div>\n              </div>\n            </CardShell>\n\n            <CardShell>\n              {!nextCard ? (\n                <div className=\"rounded-2xl border border-slate-200 bg-white/70 p-6 text-center shadow-sm dark:border-slate-800 dark:bg-slate-950/60\">\n                  <div className=\"text-xl font-semibold\">Keine f√§lligen Karten üéâ</div>\n                  <div className=\"mt-2 text-sm text-slate-600 dark:text-slate-400\">Du kannst neue Karten nachlegen (offline Starter-Pack).</div>\n                  <div className=\"mt-4 flex justify-center gap-2\">\n                    <button\n                      onClick={() => addMoreStarterCards(15)}\n                      className=\"rounded-2xl bg-gradient-to-r from-sky-500 to-indigo-500 px-4 py-2 font-semibold text-white shadow hover:opacity-90\"\n                    >\n                      Ôºã 15 Karten hinzuf√ºgen\n                    </button>\n                    <button\n                      onClick={() => setView(\"practice\")}\n                      className=\"rounded-2xl border border-slate-200 bg-white px-4 py-2 font-semibold shadow-sm hover:shadow dark:border-slate-800 dark:bg-slate-950\"\n                    >\n                      √úbungen ‚Üí\n                    </button>\n                  </div>\n                </div>\n              ) : (\n                <>\n                  <div className=\"flex items-start justify-between gap-3\">\n                    <div className=\"text-sm text-slate-500 dark:text-slate-400\">\n                      Karte ¬∑ <b className=\"text-slate-900 dark:text-slate-100\">{nextCard.kind === \"vocab\" ? \"Vokabel\" : \"Satz\"}</b>\n                    </div>\n\n                    <div className=\"flex gap-2\">\n                      <button\n                        className=\"rounded-xl bg-gradient-to-r from-indigo-500 to-fuchsia-500 px-3 py-1 text-sm font-semibold text-white shadow hover:opacity-90\"\n                        onClick={() => speak(nextCard.front, TTS_LANG.DE)}\n                        title=\"DE vorlesen\"\n                      >\n                        üîä DE\n                      </button>\n                      <button\n                        className=\"rounded-xl bg-gradient-to-r from-sky-500 to-indigo-500 px-3 py-1 text-sm font-semibold text-white shadow hover:opacity-90\"\n                        onClick={() => speak(nextCard.back, TTS_LANG[target])}\n                        title={`${target} vorlesen`}\n                      >\n                        üîä {target}\n                      </button>\n                      <button\n                        className=\"rounded-xl border border-slate-200 bg-white px-3 py-1 text-sm font-semibold shadow-sm hover:shadow dark:border-slate-800 dark:bg-slate-950\"\n                        onClick={stopSpeak}\n                        title=\"Stop\"\n                      >\n                        ‚èπ\n                      </button>\n                    </div>\n                  </div>\n\n                  <div className=\"mt-4 grid gap-3 md:grid-cols-2\">\n                    <div className=\"rounded-2xl border border-slate-200 bg-[var(--cardSolid)] p-5 shadow-sm dark:border-slate-800\">\n                      <div className=\"text-xs font-semibold text-slate-500 dark:text-slate-400\">Deutsch</div>\n                      <div className=\"mt-2 text-2xl font-black\">{nextCard.front}</div>\n                      {nextCard.example && (\n                        <div className=\"mt-3 rounded-2xl border border-slate-200 bg-white/60 p-4 text-sm dark:border-slate-800 dark:bg-slate-950/60\">\n                          <div className=\"font-semibold\">{nextCard.example}</div>\n                          {nextCard.exampleTranslation && <div className=\"mt-1 text-slate-600 dark:text-slate-300\">{nextCard.exampleTranslation}</div>}\n                        </div>\n                      )}\n                    </div>\n\n                    <div className=\"rounded-2xl border border-slate-200 bg-[var(--cardSolid)] p-5 shadow-sm dark:border-slate-800\">\n                      <div className=\"text-xs font-semibold text-slate-500 dark:text-slate-400\">{target}</div>\n                      <div className=\"mt-2 text-2xl font-black bg-gradient-to-r from-sky-600 to-fuchsia-600 bg-clip-text text-transparent dark:from-sky-300 dark:to-fuchsia-300\">\n                        {nextCard.back}\n                      </div>\n                      <div className=\"mt-3 text-sm text-slate-600 dark:text-slate-400\">\n                        Intervall: <b className=\"text-slate-900 dark:text-slate-100\">{nextCard.intervalDays}d</b> ¬∑ Ease:{\" \"}\n                        <b className=\"text-slate-900 dark:text-slate-100\">{nextCard.ease.toFixed(2)}</b>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"mt-4 grid grid-cols-2 gap-3\">\n                    <FancyBtn variant=\"bad\" onClick={() => review(false)} label=\"‚úñ Nicht gewusst\" />\n                    <FancyBtn variant=\"good\" onClick={() => review(true)} label=\"‚úî Gewusst\" />\n                  </div>\n                </>\n              )}\n            </CardShell>\n\n            <CardShell>\n              <div className=\"flex flex-wrap items-center justify-between gap-3\">\n                <div>\n                  <div className=\"text-sm text-slate-500 dark:text-slate-400\">Heute ({target})</div>\n                  <div className=\"mt-1 text-sm text-slate-600 dark:text-slate-400\">\n                    Accuracy: <b className=\"text-slate-900 dark:text-slate-100\">{todayStat.reviewed ? Math.round((todayStat.correct / todayStat.reviewed) * 100) : 0}%</b> ¬∑ Minuten:{\" \"}\n                    <b className=\"text-slate-900 dark:text-slate-100\">{todayStat.minutes}</b>\n                  </div>\n                </div>\n                <div className=\"rounded-2xl border border-slate-200 bg-white/60 px-4 py-2 text-sm font-semibold dark:border-slate-800 dark:bg-slate-950/60\">\n                  Level <span className=\"font-black\">{computeLevelFromXp(data.profile.xp).level}</span>\n                </div>\n              </div>\n\n              <div className=\"mt-3\">\n                <div className=\"flex items-center justify-between text-xs text-slate-600 dark:text-slate-400\">\n                  <span>XP</span>\n                  <span>\n                    {levelInfo.xpIntoLevel}/{levelInfo.xpNeed}\n                  </span>\n                </div>\n                <div className=\"mt-2 h-3 w-full rounded-full bg-white/60 dark:bg-slate-900/50\">\n                  <div className=\"h-3 rounded-full bg-gradient-to-r from-sky-500 to-indigo-500\" style={{ width: `${Math.round(levelInfo.progress * 100)}%` }} />\n                </div>\n              </div>\n            </CardShell>\n          </div>\n        )}\n\n        {view === \"practice\" && (\n          <Practice\n            targetLang={target}\n            nativeLang=\"DE\"\n            cards={allCardsForLang}\n            onCorrect={() => {\n              playTone(\"good\");\n              vibrate(20);\n              bumpStats(true);\n              setData((prev) => ({ ...prev, profile: addXp(prev.profile, 6) }));\n              updateStreakIfGoalMet(todayStat.reviewed + 1);\n            }}\n            onWrong={() => {\n              playTone(\"bad\");\n              vibrate(60);\n              bumpStats(false);\n              setData((prev) => ({ ...prev, profile: addXp(prev.profile, 2) }));\n              updateStreakIfGoalMet(todayStat.reviewed + 1);\n            }}\n          />\n        )}\n\n        {view === \"profile\" && (\n          <div className=\"mt-6 grid gap-4\">\n            <h2 className=\"text-xl font-semibold\">Profil & Fortschritt ({target})</h2>\n\n            <CardShell>\n              <div className=\"flex flex-wrap items-center justify-between gap-3\">\n                <div className=\"flex items-center gap-3\">\n                  <div className=\"grid h-12 w-12 place-items-center rounded-2xl bg-gradient-to-r from-sky-500 to-fuchsia-500 font-black text-white shadow\">\n                    {data.profile.username.slice(0, 1).toUpperCase()}\n                  </div>\n                  <div>\n                    <div className=\"text-lg font-semibold\">{data.profile.username}</div>\n                    <div className=\"text-sm text-slate-600 dark:text-slate-400\">\n                      Deutsch ‚Üí {target} ¬∑ Level <b className=\"text-slate-900 dark:text-slate-100\">{computeLevelFromXp(data.profile.xp).level}</b> ¬∑{\" \"}\n                      <b className=\"text-slate-900 dark:text-slate-100\">{data.profile.xp}</b> XP\n                    </div>\n                  </div>\n                </div>\n\n                <button\n                  className=\"rounded-2xl border border-slate-200 bg-white px-4 py-2 font-semibold shadow-sm hover:shadow dark:border-slate-800 dark:bg-slate-950\"\n                  onClick={() => {\n                    const name = prompt(\"Username √§ndern:\", data.profile.username);\n                    if (!name) return;\n                    setData((prev) => ({ ...prev, profile: { ...prev.profile, username: name } }));\n                  }}\n                >\n                  ‚úèÔ∏è Name\n                </button>\n              </div>\n\n              <div className=\"mt-4 grid grid-cols-2 gap-3 md:grid-cols-4\">\n                <Stat label=\"Streak\" value={data.profile.streak} suffix=\"üî•\" />\n                <Stat label=\"Best\" value={data.profile.bestStreak} suffix=\"üèÜ\" />\n                <Stat label=\"Acc\" value={totalsLang.acc} suffix=\"%\" />\n                <Stat label=\"Minuten\" value={totalsLang.minutes} />\n              </div>\n\n              <div className=\"mt-4\">\n                <div className=\"flex items-center justify-between text-xs text-slate-600 dark:text-slate-400\">\n                  <span>Sprach-Fortschritt</span>\n                  <span>{Math.round(learned.progress * 100)}%</span>\n                </div>\n                <div className=\"mt-2 h-3 w-full rounded-full bg-white/60 dark:bg-slate-900/50\">\n                  <div className=\"h-3 rounded-full bg-gradient-to-r from-emerald-500 to-teal-500\" style={{ width: `${Math.round(learned.progress * 100)}%` }} />\n                </div>\n                <div className=\"mt-2 text-sm text-slate-700 dark:text-slate-200\">\n                  Gelernte W√∂rter: <b>{learned.vocabLearned}</b> (Mastered: <b>{learned.vocabMastered}</b>) ¬∑ Gelernte S√§tze: <b>{learned.sentLearned}</b>\n                </div>\n              </div>\n            </CardShell>\n\n            <CardShell>\n              <div className=\"flex items-center justify-between gap-3\">\n                <div>\n                  <div className=\"text-lg font-semibold\">Achievements</div>\n                  <div className=\"text-sm text-slate-600 dark:text-slate-400\">\n                    Freigeschaltet: <b className=\"text-slate-900 dark:text-slate-100\">{data.achievements.filter((a) => a.unlockedAt).length}</b> / {data.achievements.length}\n                  </div>\n                </div>\n                <button\n                  className=\"rounded-2xl border border-slate-200 bg-white px-4 py-2 font-semibold shadow-sm hover:shadow dark:border-slate-800 dark:bg-slate-950\"\n                  onClick={() => evaluateAchievements()}\n                >\n                  üîç pr√ºfen\n                </button>\n              </div>\n\n              <div className=\"mt-4 grid gap-3 sm:grid-cols-2\">\n                {data.achievements.map((a) => (\n                  <div\n                    key={a.id}\n                    className={`rounded-2xl border p-4 shadow-sm ${\n                      a.unlockedAt\n                        ? \"border-emerald-200 bg-white/70 dark:border-emerald-900 dark:bg-slate-950/60\"\n                        : \"border-slate-200 bg-white/50 opacity-80 dark:border-slate-800 dark:bg-slate-950/40\"\n                    }`}\n                  >\n                    <div className=\"flex items-start gap-3\">\n                      <div className=\"grid h-10 w-10 place-items-center rounded-2xl bg-gradient-to-r from-sky-500 to-fuchsia-500 text-xl text-white shadow\">{a.icon}</div>\n                      <div className=\"min-w-0\">\n                        <div className=\"font-semibold\">\n                          {a.title}{\" \"}\n                          {a.unlockedAt && (\n                            <span className=\"ml-2 rounded-full bg-emerald-100 px-2 py-0.5 text-xs font-semibold text-emerald-700 dark:bg-emerald-900/50 dark:text-emerald-200\">\n                              unlocked\n                            </span>\n                          )}\n                        </div>\n                        <div className=\"text-sm text-slate-600 dark:text-slate-400\">{a.desc}</div>\n                        {a.unlockedAt && <div className=\"mt-1 text-xs text-slate-500 dark:text-slate-400\">{new Date(a.unlockedAt).toLocaleString()}</div>}\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </CardShell>\n\n            <CardShell>\n              <div className=\"text-lg font-semibold\">Analytics ‚Äì letzte 14 Tage ({target})</div>\n\n              <div className=\"mt-3 overflow-auto rounded-2xl border border-slate-200 bg-white/60 dark:border-slate-800 dark:bg-slate-950/60\">\n                <table className=\"w-full text-left text-sm\">\n                  <thead className=\"bg-gradient-to-r from-sky-100 to-fuchsia-100 text-slate-700 dark:from-slate-900 dark:to-slate-900 dark:text-slate-200\">\n                    <tr>\n                      <th className=\"p-3\">Datum</th>\n                      <th className=\"p-3\">Gelernt</th>\n                      <th className=\"p-3\">Richtig</th>\n                      <th className=\"p-3\">Falsch</th>\n                      <th className=\"p-3\">Min</th>\n                    </tr>\n                  </thead>\n                  <tbody className=\"divide-y divide-slate-200 dark:divide-slate-800\">\n                    {last14.map(({ day, s }) => (\n                      <tr key={day}>\n                        <td className=\"p-3\">{day}</td>\n                        <td className=\"p-3\">{s.reviewed}</td>\n                        <td className=\"p-3\">{s.correct}</td>\n                        <td className=\"p-3\">{s.wrong}</td>\n                        <td className=\"p-3\">{s.minutes}</td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              </div>\n            </CardShell>\n          </div>\n        )}\n\n        {view === \"settings\" && (\n          <div className=\"mt-6 grid gap-4\">\n            <h2 className=\"text-xl font-semibold\">Settings</h2>\n\n            <CardShell>\n              <div className=\"grid gap-4 md:grid-cols-2\">\n                <div>\n                  <div className=\"text-sm text-slate-600 dark:text-slate-400\">Lernsprache</div>\n                  <div className=\"mt-2 flex flex-wrap gap-2\">\n                    {([\"EN\", \"ES\", \"FR\", \"RU\"] as Lang[]).map((l) => (\n                      <button\n                        key={l}\n                        onClick={() => {\n                          setData((prev) => ({ ...prev, profile: { ...prev.profile, targetLang: l } }));\n                          // if no cards exist for that language, seed immediately\n                          setTimeout(() => {\n                            setData((prev) => {\n                              const has = prev.cards.some((c) => c.targetLang === l);\n                              if (has) return prev;\n                              return { ...prev, cards: [...seedCardsFromPack(l, prev.profile.level, 30), ...prev.cards] };\n                            });\n                          }, 0);\n                        }}\n                        className={`rounded-2xl border px-4 py-2 font-semibold shadow-sm hover:shadow ${\n                          target === l ? \"border-indigo-200 bg-indigo-50 dark:border-indigo-900 dark:bg-slate-900\" : \"border-slate-200 bg-white dark:border-slate-800 dark:bg-slate-950\"\n                        }`}\n                      >\n                        {l}\n                      </button>\n                    ))}\n                  </div>\n                  <div className=\"mt-2 text-xs text-slate-500 dark:text-slate-400\">Deutsch ist aktuell die Muttersprache (DE).</div>\n                </div>\n\n                <div>\n                  <div className=\"text-sm text-slate-600 dark:text-slate-400\">Level</div>\n                  <div className=\"mt-2 flex flex-wrap gap-2\">\n                    {([\"BEGINNER\", \"INTERMEDIATE\", \"ADVANCED\"] as Level[]).map((lv) => (\n                      <button\n                        key={lv}\n                        onClick={() => setData((prev) => ({ ...prev, profile: { ...prev.profile, level: lv } }))}\n                        className={`rounded-2xl border px-4 py-2 font-semibold shadow-sm hover:shadow ${\n                          data.profile.level === lv ? \"border-emerald-200 bg-emerald-50 dark:border-emerald-900 dark:bg-slate-900\" : \"border-slate-200 bg-white dark:border-slate-800 dark:bg-slate-950\"\n                        }`}\n                      >\n                        {lv === \"BEGINNER\" ? \"Beginner\" : lv === \"INTERMEDIATE\" ? \"Intermediate\" : \"Advanced\"}\n                      </button>\n                    ))}\n                  </div>\n                  <div className=\"mt-2 text-xs text-slate-500 dark:text-slate-400\">Level steuert nur die Mischung (mehr W√∂rter vs. mehr S√§tze).</div>\n                </div>\n\n                <div>\n                  <div className=\"text-sm text-slate-600 dark:text-slate-400\">Tagesziel</div>\n                  <div className=\"mt-2 flex gap-2\">\n                    <input\n                      type=\"number\"\n                      min={5}\n                      max={200}\n                      value={data.profile.dailyGoal}\n                      onChange={(e) =>\n                        setData((prev) => ({ ...prev, profile: { ...prev.profile, dailyGoal: clamp(Number(e.target.value), 5, 200) } }))\n                      }\n                      className=\"w-32 rounded-2xl border border-slate-200 bg-white px-3 py-2 dark:border-slate-800 dark:bg-slate-950\"\n                    />\n                    <div className=\"self-center text-sm text-slate-600 dark:text-slate-400\">Karten / Tag</div>\n                  </div>\n                </div>\n\n                <div>\n                  <div className=\"text-sm text-slate-600 dark:text-slate-400\">Content</div>\n                  <div className=\"mt-2 flex flex-wrap gap-2\">\n                    <button\n                      onClick={() => addMoreStarterCards(25)}\n                      className=\"rounded-2xl bg-gradient-to-r from-sky-500 to-indigo-500 px-4 py-2 font-semibold text-white shadow hover:opacity-90\"\n                    >\n                      Ôºã 25 Starter-Karten\n                    </button>\n                    <button\n                      onClick={() => {\n                        if (!confirm(\"Alles zur√ºcksetzen?\")) return;\n                        const fresh = loadData();\n                        localStorage.setItem(STORAGE_KEY, JSON.stringify(fresh));\n                        setData(fresh);\n                        setView(\"today\");\n                      }}\n                      className=\"rounded-2xl bg-gradient-to-r from-rose-500 to-orange-500 px-4 py-2 font-semibold text-white shadow hover:opacity-90\"\n                    >\n                      Reset\n                    </button>\n                  </div>\n                  <div className=\"mt-2 text-xs text-slate-500 dark:text-slate-400\">\n                    N√§chster Schritt: ‚ÄúDownload Packs‚Äù (online laden ‚Üí offline speichern). Kann ich dir als n√§chstes direkt einbauen.\n                  </div>\n                </div>\n              </div>\n            </CardShell>\n\n            <CardShell>\n              <div className=\"text-sm text-slate-600 dark:text-slate-400\">Palette</div>\n              <div className=\"mt-2 flex flex-wrap gap-2\">\n                {([\"ocean\", \"sunset\", \"lime\", \"grape\"] as AppTheme[]).map((t) => (\n                  <button\n                    key={t}\n                    onClick={() => setPalette(t)}\n                    className={`rounded-2xl border px-4 py-2 font-semibold shadow-sm hover:shadow ${\n                      palette === t ? \"border-indigo-200 bg-indigo-50 dark:border-indigo-900 dark:bg-slate-900\" : \"border-slate-200 bg-white dark:border-slate-800 dark:bg-slate-950\"\n                    }`}\n                  >\n                    {t}\n                  </button>\n                ))}\n              </div>\n            </CardShell>\n          </div>\n        )}\n      </div>\n\n      <BottomNav view={view} setView={setView} />\n    </div>\n  );\n}\n\n/** ===========================================\n * Practice (no typing, only choosing)\n * =========================================== */\nfunction Practice({\n  cards,\n  targetLang,\n  nativeLang,\n  onCorrect,\n  onWrong,\n}: {\n  cards: Card[];\n  targetLang: Lang;\n  nativeLang: \"DE\";\n  onCorrect: () => void;\n  onWrong: () => void;\n}) {\n  const vocab = cards.filter((c) => c.kind === \"vocab\");\n  const sentences = cards.filter((c) => c.kind === \"sentence\");\n\n  const [mode, setMode] = useState<\"wordpick\" | \"mc\">(\"wordpick\");\n  const [choiceCount, setChoiceCount] = useState<3 | 5>(5);\n  const [currentId, setCurrentId] = useState<string>(\"\");\n  const [feedback, setFeedback] = useState<null | { ok: boolean; correct: string }>(null);\n\n  useEffect(() => {\n    const pool = mode === \"wordpick\" ? sentences : vocab;\n    if (pool[0]) setCurrentId(pool[0].id);\n    setFeedback(null);\n  }, [mode, sentences.length, vocab.length]);\n\n  const current = useMemo(() => {\n    const pool = mode === \"wordpick\" ? sentences : vocab;\n    return pool.find((x) => x.id === currentId) ?? pool[0];\n  }, [mode, currentId, vocab, sentences]);\n\n  if (!current) {\n    return (\n      <div className=\"mt-6 rounded-2xl border border-slate-200 bg-[var(--card)] p-6 dark:border-slate-800\">\n        <div className=\"text-xl font-semibold\">Noch keine Karten.</div>\n        <div className=\"mt-2 text-sm text-slate-600 dark:text-slate-400\">Geh zu Settings und f√ºge Starter-Karten hinzu.</div>\n      </div>\n    );\n  }\n\n  if (mode === \"wordpick\") {\n    const { cloze, answer } = makeCloze(current.front);\n\n    const poolWords = [\n      ...sentences.flatMap((s) =>\n        s.front\n          .split(/\\s+/)\n          .map((w) => w.replace(/[.,!?;:()\"‚Äû‚Äú‚Äù‚Äú'‚Äô]/g, \"\"))\n          .filter((w) => w.length >= 3)\n      ),\n      ...vocab.map((v) => v.front),\n    ].filter(Boolean);\n\n    const options = useMemo(() => makeChoices(answer, poolWords, choiceCount), [answer, poolWords.join(\"|\"), choiceCount]);\n\n    const goNext = () => {\n      setFeedback(null);\n      if (sentences.length > 1) setCurrentId(pickRandom(sentences).id);\n    };\n\n    return (\n      <div className=\"mt-6 grid gap-4\">\n        <div className=\"flex flex-wrap items-center justify-between gap-2\">\n          <div className=\"flex flex-wrap gap-2\">\n            <ModeBtn active={mode === \"wordpick\"} onClick={() => { setMode(\"wordpick\"); setFeedback(null); }} label=\"Wort w√§hlen\" />\n            <ModeBtn active={mode === \"mc\"} onClick={() => { setMode(\"mc\"); setFeedback(null); }} label=\"Multiple Choice\" />\n          </div>\n\n          <div className=\"flex items-center gap-2\">\n            <span className=\"text-xs text-slate-600 dark:text-slate-400\">Optionen:</span>\n            <SmallToggle active={choiceCount === 3} onClick={() => setChoiceCount(3)} label=\"3\" />\n            <SmallToggle active={choiceCount === 5} onClick={() => setChoiceCount(5)} label=\"5\" />\n          </div>\n        </div>\n\n        <div className=\"rounded-2xl border border-slate-200 bg-[var(--card)] p-6 shadow-sm dark:border-slate-800\">\n          <div className=\"flex items-center justify-between gap-2\">\n            <div className=\"text-sm text-slate-600 dark:text-slate-400\">W√§hle das passende Wort:</div>\n            <div className=\"flex gap-2\">\n              <button\n                className=\"rounded-xl bg-gradient-to-r from-indigo-500 to-fuchsia-500 px-3 py-1 text-sm font-semibold text-white shadow hover:opacity-90\"\n                onClick={() => speak(cloze, TTS_LANG[nativeLang])}\n                title=\"Vorlesen (DE)\"\n              >\n                üîä DE\n              </button>\n              <button\n                className=\"rounded-xl bg-gradient-to-r from-sky-500 to-indigo-500 px-3 py-1 text-sm font-semibold text-white shadow hover:opacity-90\"\n                onClick={() => speak(current.back, TTS_LANG[targetLang])}\n                title={`Vorlesen (${targetLang})`}\n              >\n                üîä {targetLang}\n              </button>\n              <button\n                className=\"rounded-xl border border-slate-200 bg-white px-3 py-1 text-sm font-semibold shadow-sm hover:shadow dark:border-slate-800 dark:bg-slate-950\"\n                onClick={stopSpeak}\n                title=\"Stop\"\n              >\n                ‚èπ\n              </button>\n            </div>\n          </div>\n\n          <div className=\"mt-3 text-2xl font-black\">{cloze}</div>\n\n          <div className=\"mt-5 grid gap-3\">\n            {options.map((opt) => (\n              <button\n                key={opt}\n                disabled={!!feedback}\n                className=\"rounded-2xl border border-slate-200 bg-white/70 px-4 py-3 text-left font-semibold shadow-sm hover:shadow disabled:opacity-70 dark:border-slate-800 dark:bg-slate-950/60\"\n                onClick={() => {\n                  const ok = opt === answer;\n                  setFeedback({ ok, correct: answer });\n                  ok ? onCorrect() : onWrong();\n                  setTimeout(() => goNext(), ok ? 300 : 900);\n                }}\n              >\n                {opt}\n              </button>\n            ))}\n          </div>\n\n          {feedback && (\n            <div\n              className={`mt-4 rounded-2xl border p-4 ${\n                feedback.ok\n                  ? \"border-emerald-200 bg-emerald-50 dark:border-emerald-900 dark:bg-emerald-900/20\"\n                  : \"border-rose-200 bg-rose-50 dark:border-rose-900 dark:bg-rose-900/20\"\n              }`}\n            >\n              <div className=\"font-semibold\">{feedback.ok ? \"‚úÖ Richtig!\" : `‚ùå Falsch ‚Äì richtig ist: ${feedback.correct}`}</div>\n              <div className=\"mt-2 text-sm text-slate-700 dark:text-slate-200\">√úbersetzung: {current.back}</div>\n              <div className=\"mt-3 flex flex-wrap gap-2\">\n                <button\n                  className=\"rounded-xl bg-gradient-to-r from-indigo-500 to-fuchsia-500 px-3 py-1 text-sm font-semibold text-white shadow hover:opacity-90\"\n                  onClick={() => speak(current.front, TTS_LANG[nativeLang])}\n                >\n                  üîä Satz (DE)\n                </button>\n                <button\n                  className=\"rounded-xl bg-gradient-to-r from-sky-500 to-indigo-500 px-3 py-1 text-sm font-semibold text-white shadow hover:opacity-90\"\n                  onClick={() => speak(current.back, TTS_LANG[targetLang])}\n                >\n                  üîä √úbersetzung\n                </button>\n                <button\n                  className=\"rounded-xl border border-slate-200 bg-white px-3 py-1 text-sm font-semibold shadow-sm hover:shadow dark:border-slate-800 dark:bg-slate-950\"\n                  onClick={goNext}\n                >\n                  Weiter ‚Üí\n                </button>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  // Multiple Choice: choose correct translation\n  const choices = useMemo(() => {\n    const pool = vocab.map((v) => v.back);\n    return makeChoices(current.back, pool, 4);\n  }, [current.id, current.back, vocab]);\n\n  return (\n    <div className=\"mt-6 grid gap-4\">\n      <div className=\"flex flex-wrap gap-2\">\n        <ModeBtn active={mode === \"wordpick\"} onClick={() => { setMode(\"wordpick\"); setFeedback(null); }} label=\"Wort w√§hlen\" />\n        <ModeBtn active={mode === \"mc\"} onClick={() => { setMode(\"mc\"); setFeedback(null); }} label=\"Multiple Choice\" />\n      </div>\n\n      <div className=\"rounded-2xl border border-slate-200 bg-[var(--card)] p-6 shadow-sm dark:border-slate-800\">\n        <div className=\"flex items-center justify-between gap-2\">\n          <div className=\"text-sm text-slate-600 dark:text-slate-400\">W√§hle die richtige √úbersetzung:</div>\n          <div className=\"flex gap-2\">\n            <button\n              className=\"rounded-xl bg-gradient-to-r from-indigo-500 to-fuchsia-500 px-3 py-1 text-sm font-semibold text-white shadow hover:opacity-90\"\n              onClick={() => speak(current.front, TTS_LANG[nativeLang])}\n              title=\"Vorlesen (DE)\"\n            >\n              üîä DE\n            </button>\n            <button\n              className=\"rounded-xl border border-slate-200 bg-white px-3 py-1 text-sm font-semibold shadow-sm hover:shadow dark:border-slate-800 dark:bg-slate-950\"\n              onClick={stopSpeak}\n              title=\"Stop\"\n            >\n              ‚èπ\n            </button>\n          </div>\n        </div>\n\n        <div className=\"mt-3 text-2xl font-black\">{current.front}</div>\n\n        <div className=\"mt-4 grid gap-3\">\n          {choices.map((c) => (\n            <button\n              key={c}\n              className=\"rounded-2xl border border-slate-200 bg-white/70 px-4 py-3 text-left font-semibold shadow-sm hover:shadow dark:border-slate-800 dark:bg-slate-950/60\"\n              onClick={() => {\n                const ok = c === current.back;\n                ok ? onCorrect() : onWrong();\n                if (vocab.length > 1) setCurrentId(pickRandom(vocab).id);\n              }}\n            >\n              {c}\n            </button>\n          ))}\n        </div>\n\n        {(current.example || current.exampleTranslation) && (\n          <div className=\"mt-5 rounded-2xl border border-slate-200 bg-white/60 p-4 dark:border-slate-800 dark:bg-slate-900/50\">\n            <div className=\"text-sm text-slate-600 dark:text-slate-300\">Beispiel:</div>\n            {current.example && <div className=\"mt-1 font-semibold\">{current.example}</div>}\n            {current.exampleTranslation && <div className=\"mt-1 text-sm text-slate-600 dark:text-slate-300\">{current.exampleTranslation}</div>}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\n/** ===========================================\n * UI\n * =========================================== */\nfunction Header({\n  view,\n  setView,\n  mode,\n  toggleMode,\n  level,\n  xp,\n  targetLang,\n  streak,\n}: {\n  view: View;\n  setView: (v: View) => void;\n  mode: ThemeMode;\n  toggleMode: () => void;\n  level: Level;\n  xp: number;\n  targetLang: Lang;\n  streak: number;\n}) {\n  const lvl = computeLevelFromXp(xp).level;\n  return (\n    <div className=\"flex flex-wrap items-center justify-between gap-3\">\n      <div>\n        <div className=\"text-2xl font-black\">\n          <span className=\"bg-gradient-to-r from-sky-600 via-indigo-600 to-fuchsia-600 bg-clip-text text-transparent dark:from-sky-300 dark:via-indigo-300 dark:to-fuchsia-300\">\n            SprachenlernApp\n          </span>\n        </div>\n        <div className=\"text-sm text-slate-600 dark:text-slate-400\">\n          Deutsch ‚Üí <b className=\"text-slate-900 dark:text-slate-100\">{targetLang}</b> ¬∑ Level{\" \"}\n          <b className=\"text-slate-900 dark:text-slate-100\">{lvl}</b> ¬∑ {level === \"BEGINNER\" ? \"Beginner\" : level === \"INTERMEDIATE\" ? \"Intermediate\" : \"Advanced\"} ¬∑{\" \"}\n          <b className=\"text-slate-900 dark:text-slate-100\">{streak}</b>üî•\n        </div>\n      </div>\n\n      <div className=\"hidden items-center gap-2 md:flex\">\n        <TopButton active={view === \"today\"} onClick={() => setView(\"today\")} label=\"Heute\" />\n        <TopButton active={view === \"practice\"} onClick={() => setView(\"practice\")} label=\"√úbungen\" />\n        <TopButton active={view === \"profile\"} onClick={() => setView(\"profile\")} label=\"Profil\" />\n        <TopButton active={view === \"settings\"} onClick={() => setView(\"settings\")} label=\"Settings\" />\n        <button\n          onClick={toggleMode}\n          className=\"ml-2 rounded-2xl border border-slate-200 bg-white px-4 py-2 font-semibold shadow-sm hover:shadow dark:border-slate-800 dark:bg-slate-950\"\n          title=\"Dark Mode umschalten\"\n        >\n          {mode === \"dark\" ? \"üåô Dark\" : \"‚òÄÔ∏è Light\"}\n        </button>\n      </div>\n    </div>\n  );\n}\nfunction TopButton({ active, onClick, label }: { active: boolean; onClick: () => void; label: string }) {\n  return (\n    <button\n      onClick={onClick}\n      className={`rounded-2xl border px-4 py-2 font-semibold shadow-sm hover:shadow ${\n        active ? \"border-indigo-200 bg-indigo-50 dark:border-indigo-900 dark:bg-slate-900\" : \"border-slate-200 bg-white dark:border-slate-800 dark:bg-slate-950\"\n      }`}\n    >\n      {label}\n    </button>\n  );\n}\nfunction BottomNav({ view, setView }: { view: View; setView: (v: View) => void }) {\n  return (\n    <div className=\"fixed bottom-0 left-0 right-0 border-t border-slate-200 bg-white/80 backdrop-blur dark:border-slate-800 dark:bg-slate-950/70 md:hidden\">\n      <div className=\"mx-auto grid max-w-5xl grid-cols-4 gap-1 p-2\">\n        <NavBtn active={view === \"today\"} onClick={() => setView(\"today\")} label=\"Heute\" />\n        <NavBtn active={view === \"practice\"} onClick={() => setView(\"practice\")} label=\"√úbungen\" />\n        <NavBtn active={view === \"profile\"} onClick={() => setView(\"profile\")} label=\"Profil\" />\n        <NavBtn active={view === \"settings\"} onClick={() => setView(\"settings\")} label=\"Settings\" />\n      </div>\n    </div>\n  );\n}\nfunction NavBtn({ active, onClick, label }: { active: boolean; onClick: () => void; label: string }) {\n  return (\n    <button\n      onClick={onClick}\n      className={`rounded-2xl border px-2 py-2 text-sm font-semibold shadow-sm ${\n        active ? \"border-indigo-200 bg-indigo-50 dark:border-indigo-900 dark:bg-slate-900\" : \"border-slate-200 bg-white dark:border-slate-800 dark:bg-slate-950\"\n      }`}\n    >\n      {label}\n    </button>\n  );\n}\nfunction CardShell({ children }: { children: React.ReactNode }) {\n  return <div className=\"rounded-2xl border border-slate-200 bg-[var(--card)] p-5 shadow-sm dark:border-slate-800\">{children}</div>;\n}\nfunction Pill({ children }: { children: React.ReactNode }) {\n  return <div className=\"rounded-full bg-gradient-to-r from-emerald-500 to-teal-500 px-3 py-1 text-sm font-semibold text-white shadow\">{children}</div>;\n}\nfunction FancyBtn({ variant, onClick, label }: { variant: \"good\" | \"bad\"; onClick: () => void; label: string }) {\n  const cls = variant === \"good\" ? \"from-emerald-500 to-teal-500\" : \"from-rose-500 to-orange-500\";\n  return (\n    <button onClick={onClick} className={`rounded-2xl bg-gradient-to-r ${cls} px-4 py-3 font-semibold text-white shadow hover:opacity-90`}>\n      {label}\n    </button>\n  );\n}\nfunction Stat({ label, value, suffix }: { label: string; value: number; suffix?: string }) {\n  return (\n    <div className=\"rounded-2xl border border-slate-200 bg-white/70 p-4 shadow-sm dark:border-slate-800 dark:bg-slate-950/60\">\n      <div className=\"text-sm text-slate-600 dark:text-slate-400\">{label}</div>\n      <div className=\"mt-1 text-2xl font-black bg-gradient-to-r from-sky-600 to-fuchsia-600 bg-clip-text text-transparent dark:from-sky-300 dark:to-fuchsia-300\">\n        {value}\n        {suffix ? <span className=\"ml-1 text-base font-semibold\">{suffix}</span> : null}\n      </div>\n    </div>\n  );\n}\nfunction ModeBtn({ active, onClick, label }: { active: boolean; onClick: () => void; label: string }) {\n  return (\n    <button\n      onClick={onClick}\n      className={`rounded-2xl border px-4 py-2 font-semibold ${active ? \"bg-indigo-50 dark:bg-slate-900\" : \"bg-white dark:bg-slate-950\"} border-slate-200 shadow-sm hover:shadow dark:border-slate-800`}\n    >\n      {label}\n    </button>\n  );\n}\nfunction SmallToggle({ active, onClick, label }: { active: boolean; onClick: () => void; label: string }) {\n  return (\n    <button\n      onClick={onClick}\n      className={`rounded-2xl border px-3 py-1 text-sm font-semibold shadow-sm hover:shadow dark:border-slate-800 ${\n        active ? \"border-indigo-200 bg-indigo-50 dark:bg-slate-900\" : \"border-slate-200 bg-white dark:bg-slate-950\"\n      }`}\n    >\n      {label}\n    </button>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}